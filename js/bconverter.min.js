function x(a) { if (!a) throw Error("assert :P") }

function fa(a, t, r) {
    for (var n = 0; 4 > n; n++)
        if (a[t + n] != r.charCodeAt(n)) return !0;
    return !1
}

function I(a, t, r, n, e) { for (var i = 0; i < e; i++) a[t + i] = r[n + i] }

function M(a, t, r, n) { for (var e = 0; e < n; e++) a[t + e] = r }

function V(a) { return new Int32Array(a) }

function wa(a, t) { for (var r = [], n = 0; n < a; n++) r.push(new t); return r }

function wb() { var a = []; return function a(t, r, n) { for (var e = n[r], i = 0; i < e && (t.push(n.length > r + 1 ? [] : 0), !(n.length < r + 1)); i++) a(t[i], r + 1, n) }(a, 0, [3, 11]), a }

function Ed(a, t) { var r = []; return function a(r, n, e) { for (var i = e[n], f = 0; f < i && (r.push(e.length > n + 1 ? [] : new t), !(e.length < n + 1)); f++) a(r[f], n + 1, e) }(r, 0, a), r }

function memcmp(a, t, r, n) {
    for (var e = 0; e < n; e++)
        if (a[t + e] != r.charCodeAt(e)) return !0;
    return !1
}

function GetTag(a, t) { for (var r = "", n = 0; n < 4; n++) r += String.fromCharCode(a[t++]); return r }

function GetLE16(a, t) { return a[t + 0] << 0 | a[t + 1] << 8 }

function GetLE24(a, t) { return (a[t + 0] << 0 | a[t + 1] << 8 | a[t + 2] << 16) >>> 0 }

function GetLE32(a, t) { return (a[t + 0] << 0 | a[t + 1] << 8 | a[t + 2] << 16 | a[t + 3] << 24) >>> 0 }

function WebPRiffParser(a, t) {
    var r = {},
        n = 0,
        e = !1,
        i = 0,
        f = 0;
    if (r.frames = [], !memcmp(a, t, "RIFF", 4)) {
        GetLE32(a, t += 4);
        for (t += 8; t < a.length;) {
            var u = GetTag(a, t),
                o = GetLE32(a, t += 4);
            t += 4;
            var l = o + (1 & o);
            switch (u) {
                case "VP8 ":
                case "VP8L":
                    void 0 === r.frames[n] && (r.frames[n] = {});
                    (h = r.frames[n]).src_off = e ? f : t - 8, h.src_size = i + o + 8, n++, e && (e = !1, i = 0, f = 0);
                    break;
                case "VP8X":
                    (h = r.header = {}).feature_flags = a[t];
                    var c = t + 4;
                    h.canvas_width = 1 + GetLE24(a, c);
                    c += 3;
                    h.canvas_height = 1 + GetLE24(a, c);
                    c += 3;
                    break;
                case "ALPH":
                    e = !0, i = l + 8, f = t - 8;
                    break;
                case "ANIM":
                    (h = r.header).bgcolor = GetLE32(a, t);
                    c = t + 4;
                    h.loop_count = GetLE16(a, c);
                    c += 2;
                    break;
                case "ANMF":
                    var s, h;
                    (h = r.frames[n] = {}).offset_x = 2 * GetLE24(a, t), t += 3, h.offset_y = 2 * GetLE24(a, t), t += 3, h.width = 1 + GetLE24(a, t), t += 3, h.height = 1 + GetLE24(a, t), t += 3, h.duration = GetLE24(a, t), t += 3, s = a[t++], h.dispose = 1 & s, h.blend = s >> 1 & 1
            }
            "ANMF" != u && (t += l)
        }
        return r
    }
}

function WebPImageViewer(a, t, r) {
    var n = document.createElement("canvas"),
        e = n.getContext("2d"),
        i = t.response,
        f = t.header ? t.header : null,
        u = t.frames ? t.frames : null;
    if (f) {
        f.loop_counter = f.loop_count, n.height = f.canvas_height, n.width = f.canvas_width;
        for (var o = !1, l = 0; l < u.length; l++)
            if (0 == u[l].blend) { o = !0; break }
    }
    for (l = 0; l < u.length; l++) {
        var c = [0],
            s = [0],
            h = u[l],
            b = a.WebPDecodeRGBA(i, h.src_off, h.src_size, s, c);
        if (h.rgba = b, h.imgwidth = s[0], h.imgheight = c[0], f) {
            if (o)
                for (var d = [], v = e.getImageData(h.offset_x, h.offset_y, s[0], c[0]), w = 0; w < s[0] * c[0] * 4; w++) d[w] = v.data[w]
        } else n.height = c[0], n.width = s[0];
        var g = e.createImageData(s[0], c[0]);
        if (1 == u.length && void 0 === h.blend || 1 == h.blend)
            for (w = 0; w < s[0] * c[0] * 4; w++) g.data[w] = b[w];
        else
            for (w = 0; w < s[0] * c[0] * 4; w += 4) b[w + 3] > 0 ? (g.data[w + 3] = b[w + 3], g.data[w] = b[w], g.data[w + 1] = b[w + 1], g.data[w + 2] = b[w + 2]) : (g.data[w + 3] = d[w + 3], g.data[w] = d[w], g.data[w + 1] = d[w + 1], g.data[w + 2] = d[w + 2]);
        1 == u.length ? e.putImageData(g, 0, 0) : e.putImageData(g, h.offset_x, h.offset_y), t.dataurl && (h.dataurl = n.toDataURL()), h.rgbaoutput = h.rgba ? f ? e.getImageData(0, 0, f.canvas_width, f.canvas_height).data : b : null, 1 == h.dispose && e.clearRect(h.offset_x, h.offset_y, s[0], c[0])
    }
    t.frames ? r(t.frames[0]) : r(!1)
}
window.WebPDecoder = function() {
    function a(a, t) { for (var r = 1 << t - 1 >>> 0; a & r;) r >>>= 1; return r ? (a & r - 1) + r : a }

    function t(a, t, r, n, e) {
        x(!(n % r));
        do { a[t + (n -= r)] = e } while (0 < n)
    }

    function r(r, e, i, f, u) {
        if (x(2328 >= u), 512 >= u) var o = V(512);
        else if (null == (o = V(u))) return 0;
        return function(r, e, i, f, u, o) {
            var l, c, s = e,
                h = 1 << i,
                b = V(16),
                d = V(16);
            for (x(0 != u), x(null != f), x(null != r), x(0 < i), c = 0; c < u; ++c) { if (15 < f[c]) return 0;++b[f[c]] }
            if (b[0] == u) return 0;
            for (d[1] = 0, l = 1; 15 > l; ++l) {
                if (b[l] > 1 << l) return 0;
                d[l + 1] = d[l] + b[l]
            }
            for (c = 0; c < u; ++c) l = f[c], 0 < f[c] && (o[d[l]++] = c);
            if (1 == d[15]) return (f = new n).g = 0, f.value = o[0], t(r, s, 1, h, f), h;
            var v, w = -1,
                g = h - 1,
                p = 0,
                P = 1,
                m = 1,
                k = 1 << i;
            for (c = 0, l = 1, u = 2; l <= i; ++l, u <<= 1) { if (P += m <<= 1, 0 > (m -= b[l])) return 0; for (; 0 < b[l]; --b[l])(f = new n).g = l, f.value = o[c++], t(r, s + p, u, k, f), p = a(p, l) }
            for (l = i + 1, u = 2; 15 >= l; ++l, u <<= 1) {
                if (P += m <<= 1, 0 > (m -= b[l])) return 0;
                for (; 0 < b[l]; --b[l]) {
                    if (f = new n, (p & g) != w) {
                        for (s += k, v = 1 << (w = l) - i; 15 > w && !(0 >= (v -= b[w]));) ++w, v <<= 1;
                        h += k = 1 << (v = w - i), r[e + (w = p & g)].g = v + i, r[e + w].value = s - e - w
                    }
                    f.g = l - i, f.value = o[c++], t(r, s + (p >> i), u, k, f), p = a(p, l)
                }
            }
            return P != 2 * d[15] - 1 ? 0 : h
        }(r, e, i, f, u, o)
    }

    function n() { this.value = this.g = 0 }

    function e() { this.value = this.g = 0 }

    function i() { this.G = wa(5, n), this.H = V(5), this.jc = this.Qb = this.qb = this.nd = 0, this.pd = wa(xr, e) }

    function f(a, t, r, n) { x(null != a), x(null != t), x(2147483648 > n), a.Ca = 254, a.I = 0, a.b = -8, a.Ka = 0, a.oa = t, a.pa = r, a.Jd = t, a.Yc = r + n, a.Zc = 4 <= n ? r + n - 4 + 1 : r, p(a) }

    function u(a, t) { for (var r = 0; 0 < t--;) r |= m(a, 128) << t; return r }

    function o(a, t) { var r = u(a, t); return P(a) ? -r : r }

    function l(a, t, r, n) {
        var e, i = 0;
        for (x(null != a), x(null != t), x(4294967288 > n), a.Sb = n, a.Ra = 0, a.u = 0, a.h = 0, 4 < n && (n = 4), e = 0; e < n; ++e) i += t[r + e] << 8 * e;
        a.Ra = i, a.bb = n, a.oa = t, a.pa = r
    }

    function c(a) {
        for (; 8 <= a.u && a.bb < a.Sb;) a.Ra >>>= 8, a.Ra += a.oa[a.pa + a.bb] << Ar - 8 >>> 0, ++a.bb, a.u -= 8;
        v(a) && (a.h = 1, a.u = 0)
    }

    function s(a, t) { if (x(0 <= t), !a.h && t <= Ir) { var r = d(a) & kr[t]; return a.u += t, c(a), r } return a.h = 1, a.u = 0 }

    function h() { this.b = this.Ca = this.I = 0, this.oa = [], this.pa = 0, this.Jd = [], this.Yc = 0, this.Zc = [], this.Ka = 0 }

    function b() { this.Ra = 0, this.oa = [], this.h = this.u = this.bb = this.Sb = this.pa = 0 }

    function d(a) { return a.Ra >>> (a.u & Ar - 1) >>> 0 }

    function v(a) { return x(a.bb <= a.Sb), a.h || a.bb == a.Sb && a.u > Ar }

    function w(a, t) { a.u = t, a.h = v(a) }

    function g(a) { a.u >= Vr && (x(a.u >= Vr), c(a)) }

    function p(a) { x(null != a && null != a.oa), a.pa < a.Zc ? (a.I = (a.oa[a.pa++] | a.I << 8) >>> 0, a.b += 8) : (x(null != a && null != a.oa), a.pa < a.Yc ? (a.b += 8, a.I = a.oa[a.pa++] | a.I << 8) : a.Ka ? a.b = 0 : (a.I <<= 8, a.b += 8, a.Ka = 1)) }

    function P(a) { return u(a, 1) }

    function m(a, t) {
        var r = a.Ca;
        0 > a.b && p(a);
        var n = a.b,
            e = r * t >>> 8,
            i = (a.I >>> n > e) + 0;
        for (i ? (r -= e, a.I -= e + 1 << n >>> 0) : r = e + 1, n = r, e = 0; 256 <= n;) e += 8, n >>= 8;
        return n = 7 ^ e + Lr[n], a.b -= n, a.Ca = (r << n) - 1, i
    }

    function k(a, t, r) { a[t + 0] = r >> 24 & 255, a[t + 1] = r >> 16 & 255, a[t + 2] = r >> 8 & 255, a[t + 3] = r >> 0 & 255 }

    function A(a, t) { return a[t + 0] << 0 | a[t + 1] << 8 }

    function L(a, t) { return A(a, t) | a[t + 2] << 16 }

    function R(a, t) { return A(a, t) | A(a, t + 2) << 16 }

    function y(a, t) { var r = 1 << t; return x(null != a), x(0 < t), a.X = V(r), null == a.X ? 0 : (a.Mb = 32 - t, a.Xa = t, 1) }

    function B(a, t) { x(null != a), x(null != t), x(a.Xa == t.Xa), I(t.X, 0, a.X, 0, 1 << t.Xa) }

    function G() { this.X = [], this.Xa = this.Mb = 0 }

    function E(a, t, r, n) {
        x(null != r), x(null != n);
        var e = r[0],
            i = n[0];
        return 0 == e && (e = (a * i + t / 2) / t), 0 == i && (i = (t * e + a / 2) / a), 0 >= e || 0 >= i ? 0 : (r[0] = e, n[0] = i, 1)
    }

    function D(a, t) { return a + (1 << t) - 1 >>> t }

    function F(a, t) { return ((4278255360 & a) + (4278255360 & t) >>> 0 & 4278255360) + ((16711935 & a) + (16711935 & t) >>> 0 & 16711935) >>> 0 }

    function C(a, t) {
        self[t] = function(t, r, n, e, i, f, u) {
            var o;
            for (o = 0; o < i; ++o) {
                var l = self[a](f[u + o - 1], n, e + o);
                f[u + o] = F(t[r + o], l)
            }
        }
    }

    function T() { this.ud = this.hd = this.jd = 0 }

    function U(a, t) { return ((4278124286 & (a ^ t)) >>> 1) + (a & t) >>> 0 }

    function j(a) { return 0 <= a && 256 > a ? a : 0 > a ? 0 : 255 < a ? 255 : void 0 }

    function H(a, t) { return j(a + (a - t + .5 >> 1)) }

    function W(a, t, r) { return Math.abs(t - r) - Math.abs(a - r) }

    function S(a, t, r, n, e, i, f) { for (n = i[f - 1], r = 0; r < e; ++r) i[f + r] = n = F(a[t + r], n) }

    function _(a, t, r, n, e) {
        var i;
        for (i = 0; i < r; ++i) {
            var f = a[t + i],
                u = f >> 8 & 255,
                o = 16711935 & (o = (o = 16711935 & f) + ((u << 16) + u));
            n[e + i] = (4278255360 & f) + o >>> 0
        }
    }

    function O(a, t) { t.jd = a >> 0 & 255, t.hd = a >> 8 & 255, t.ud = a >> 16 & 255 }

    function N(a, t, r, n, e, i) {
        var f;
        for (f = 0; f < n; ++f) {
            var u = t[r + f],
                o = u >>> 8,
                l = u,
                c = 255 & (c = (c = u >>> 16) + ((a.jd << 24 >> 24) * (o << 24 >> 24) >>> 5));
            l = 255 & (l = (l = l + ((a.hd << 24 >> 24) * (o << 24 >> 24) >>> 5)) + ((a.ud << 24 >> 24) * (c << 24 >> 24) >>> 5));
            e[i + f] = (4278255360 & u) + (c << 16) + l
        }
    }

    function K(a, t, r, n, e) {
        self[t] = function(a, t, r, i, f, u, o, l, c) {
            for (i = o; i < l; ++i)
                for (o = 0; o < c; ++o) f[u++] = e(r[n(a[t++])])
        }, self[a] = function(a, t, i, f, u, o, l) {
            var c = 8 >> a.b,
                s = a.Ea,
                h = a.K[0],
                b = a.w;
            if (8 > c)
                for (a = (1 << a.b) - 1, b = (1 << c) - 1; t < i; ++t) { var d, v = 0; for (d = 0; d < s; ++d) d & a || (v = n(f[u++])), o[l++] = e(h[v & b]), v >>= c } else self["VP8LMapColor" + r](f, u, h, b, o, l, t, i, s)
        }
    }

    function Y(a, t, r, n, e) {
        for (r = t + r; t < r;) {
            var i = a[t++];
            n[e++] = i >> 16 & 255, n[e++] = i >> 8 & 255, n[e++] = i >> 0 & 255
        }
    }

    function z(a, t, r, n, e) {
        for (r = t + r; t < r;) {
            var i = a[t++];
            n[e++] = i >> 16 & 255, n[e++] = i >> 8 & 255, n[e++] = i >> 0 & 255, n[e++] = i >> 24 & 255
        }
    }

    function J(a, t, r, n, e) {
        for (r = t + r; t < r;) {
            var i = (f = a[t++]) >> 16 & 240 | f >> 12 & 15,
                f = f >> 0 & 240 | f >> 28 & 15;
            n[e++] = i, n[e++] = f
        }
    }

    function X(a, t, r, n, e) {
        for (r = t + r; t < r;) {
            var i = (f = a[t++]) >> 16 & 248 | f >> 13 & 7,
                f = f >> 5 & 224 | f >> 3 & 31;
            n[e++] = i, n[e++] = f
        }
    }

    function Z(a, t, r, n, e) {
        for (r = t + r; t < r;) {
            var i = a[t++];
            n[e++] = i >> 0 & 255, n[e++] = i >> 8 & 255, n[e++] = i >> 16 & 255
        }
    }

    function $(a, t, r, n, e, i) {
        if (0 == i)
            for (r = t + r; t < r;) k(n, ((i = a[t++])[0] >> 24 | i[1] >> 8 & 65280 | i[2] << 8 & 16711680 | i[3] << 24) >>> 0), e += 32;
        else I(n, e, a, t, r)
    }

    function q(a, t) { self[t][0] = self[a + "0"], self[t][1] = self[a + "1"], self[t][2] = self[a + "2"], self[t][3] = self[a + "3"], self[t][4] = self[a + "4"], self[t][5] = self[a + "5"], self[t][6] = self[a + "6"], self[t][7] = self[a + "7"], self[t][8] = self[a + "8"], self[t][9] = self[a + "9"], self[t][10] = self[a + "10"], self[t][11] = self[a + "11"], self[t][12] = self[a + "12"], self[t][13] = self[a + "13"], self[t][14] = self[a + "0"], self[t][15] = self[a + "0"] }

    function Q(a) { return a == Ln || a == Rn || a == yn || a == Bn }

    function aa() { this.Rd = this.height = this.width = this.S = 0, this.f = {}, this.f.RGBA = new function() { this.eb = [], this.size = this.A = this.fb = 0 }, this.f.kb = new function() { this.y = [], this.f = [], this.ea = [], this.F = [], this.Tc = this.Ed = this.Cd = this.Fd = this.lb = this.Db = this.Ab = this.fa = this.J = this.W = this.N = this.O = 0 }, this.sd = null }

    function ta(a) { return alert("todo:WebPSamplerProcessPlane"), a.T }

    function ra(a, t) {
        var r = a.T,
            n = t.ba.f.RGBA,
            e = n.eb,
            i = n.fb + a.ka * n.A,
            f = ae[t.ba.S],
            u = a.y,
            o = a.O,
            l = a.f,
            c = a.N,
            s = a.ea,
            h = a.W,
            b = t.cc,
            d = t.dc,
            v = t.Mc,
            w = t.Nc,
            g = a.ka,
            p = a.ka + a.T,
            P = a.U,
            m = P + 1 >> 1;
        for (0 == g ? f(u, o, null, null, l, c, s, h, l, c, s, h, e, i, null, null, P) : (f(t.ec, t.fc, u, o, b, d, v, w, l, c, s, h, e, i - n.A, e, i, P), ++r); g + 2 < p; g += 2) b = l, d = c, v = s, w = h, c += a.Rc, h += a.Rc, i += 2 * n.A, f(u, (o += 2 * a.fa) - a.fa, u, o, b, d, v, w, l, c, s, h, e, i - n.A, e, i, P);
        return o += a.fa, a.j + p < a.o ? (I(t.ec, t.fc, u, o, P), I(t.cc, t.dc, l, c, m), I(t.Mc, t.Nc, s, h, m), r--) : 1 & p || f(u, o, null, null, l, c, s, h, l, c, s, h, e, i + n.A, null, null, P), r
    }

    function na(a, t, r) {
        var n = a.F,
            e = [a.J];
        if (null != n) {
            var i = a.U,
                f = t.ba.S,
                u = f == In || f == yn;
            t = t.ba.f.RGBA;
            var o = [0],
                l = a.ka;
            o[0] = a.T, a.Kb && (0 == l ? --o[0] : (--l, e[0] -= a.width), a.j + a.ka + a.T == a.o && (o[0] = a.o - a.j - l));
            var c = t.eb;
            l = t.fb + l * t.A;
            a = on(n, e[0], a.width, i, o, c, l + (u ? 0 : 3), t.A), x(r == o), a && Q(f) && fn(c, l, u, i, o, t.A)
        }
        return 0
    }

    function ea(a) {
        var t = a.ma,
            r = t.ba.S,
            n = 11 > r,
            e = r == mn || r == kn || r == In || r == An || 12 == r || Q(r);
        if (t.memory = null, t.Ib = null, t.Jb = null, t.Nd = null, !pr(t.Oa, a, e ? 11 : 12)) return 0;
        if (e && Q(r) && tr(), a.da) alert("todo:use_scaling");
        else {
            if (n) {
                if (t.Ib = ta, a.Kb) {
                    if (r = a.U + 1 >> 1, t.memory = V(a.U + 2 * r), null == t.memory) return 0;
                    t.ec = t.memory, t.fc = 0, t.cc = t.ec, t.dc = t.fc + a.U, t.Mc = t.cc, t.Nc = t.dc + r, t.Ib = ra, tr()
                }
            } else alert("todo:EmitYUV");
            e && (t.Jb = na, n && Qt())
        }
        if (n && !de) {
            for (a = 0; 256 > a; ++a) ve[a] = 89858 * (a - 128) + le >> oe, pe[a] = -22014 * (a - 128) + le, ge[a] = -45773 * (a - 128), we[a] = 113618 * (a - 128) + le >> oe;
            for (a = ce; a < se; ++a) t = 76283 * (a - 16) + le >> oe, Pe[a - ce] = Da(t, 255), me[a - ce] = Da(t + 8 >> 4, 15);
            de = 1
        }
        return 1
    }

    function ia(a) {
        var t = a.ma,
            r = a.U,
            n = a.T;
        return x(!(1 & a.ka)), 0 >= r || 0 >= n ? 0 : (r = t.Ib(a, t), null != t.Jb && t.Jb(a, t, r), t.Dc += r, 1)
    }

    function ua(a) { a.ma.memory = null }

    function oa(a, t, r, n) { return 47 != s(a, 8) ? 0 : (t[0] = s(a, 14) + 1, r[0] = s(a, 14) + 1, n[0] = s(a, 1), 0 != s(a, 3) ? 0 : !a.h) }

    function la(a, t) { if (4 > a) return a + 1; var r = a - 2 >> 1; return (2 + (1 & a) << r) + s(t, r) + 1 }

    function ca(a, t) { return 120 < t ? t - 120 : 1 <= (r = ((r = Cn[t - 1]) >> 4) * a + (8 - (15 & r))) ? r : 1; var r }

    function sa(a, t, r) {
        var n = d(r),
            e = a[t += 255 & n].g - 8;
        return 0 < e && (w(r, r.u + 8), n = d(r), t += a[t].value, t += n & (1 << e) - 1), w(r, r.u + a[t].g), a[t].value
    }

    function ha(a, t, r) { return r.g += a.g, r.value += a.value << t >>> 0, x(8 >= r.g), a.g }

    function ba(a, t, r) { var n = a.xc; return x((t = 0 == n ? 0 : a.vc[a.md * (r >> n) + (t >> n)]) < a.Wb), a.Ya[t] }

    function da(a, t, r, n) {
        var e = a.ab,
            i = a.c * t,
            f = a.C;
        t = f + t;
        var u = r,
            o = n;
        for (n = a.Ta, r = a.Ua; 0 < e--;) {
            var l = a.gc[e],
                c = f,
                s = t,
                h = u,
                b = o,
                d = (o = n, u = r, l.Ea);
            switch (x(c < s), x(s <= l.nc), l.hc) {
                case 2:
                    Br(h, b, (s - c) * d, o, u);
                    break;
                case 0:
                    var v = c,
                        w = s,
                        g = o,
                        p = u,
                        P = (L = l).Ea;
                    0 == v && (Rr(h, b, null, null, 1, g, p), S(h, b + 1, 0, 0, P - 1, g, p + 1), b += P, p += P, ++v);
                    for (var m = 1 << L.b, k = m - 1, A = D(P, L.b), V = L.K, L = L.w + (v >> L.b) * A; v < w;) {
                        var R = V,
                            y = L,
                            B = 1;
                        for (yr(h, b, g, p - P, 1, g, p); B < P;) {
                            var M = (B & ~k) + m;
                            M > P && (M = P), (0, Fr[R[y++] >> 8 & 15])(h, b + +B, g, p + B - P, M - B, g, p + B), B = M
                        }
                        b += P, p += P, ++v & k || (L += A)
                    }
                    s != l.nc && I(o, u - d, o, u + (s - c - 1) * d, d);
                    break;
                case 1:
                    for (d = h, w = b, P = (h = l.Ea) - (p = h & ~(g = (b = 1 << l.b) - 1)), v = D(h, l.b), m = l.K, l = l.w + (c >> l.b) * v; c < s;) {
                        for (k = m, A = l, V = new T, L = w + p, R = w + h; w < L;) O(k[A++], V), Cr(V, d, w, b, o, u), w += b, u += b;
                        w < R && (O(k[A++], V), Cr(V, d, w, P, o, u), w += P, u += P), ++c & g || (l += v)
                    }
                    break;
                case 3:
                    if (h == o && b == u && 0 < l.b) {
                        for (w = o, h = d = u + (s - c) * d - (p = (s - c) * D(l.Ea, l.b)), b = o, g = u, v = [], p = (P = p) - 1; 0 <= p; --p) v[p] = b[g + p];
                        for (p = P - 1; 0 <= p; --p) w[h + p] = v[p];
                        Mr(l, c, s, o, d, o, u)
                    } else Mr(l, c, s, h, b, o, u)
            }
            u = n, o = r
        }
        o != r && I(n, r, u, o, i)
    }

    function va(a, t) {
        var r = a.V,
            n = a.Ba + a.c * a.C,
            e = t - a.C;
        if (x(t <= a.l.o), x(16 >= e), 0 < e) {
            var i = a.l,
                f = a.Ta,
                u = a.Ua,
                o = i.width;
            if (da(a, e, r, n), e = u = [u], x((r = a.C) < (n = t)), x(i.v < i.va), n > i.o && (n = i.o), r < i.j) {
                var l = i.j - r;
                r = i.j;
                e[0] += l * o
            }
            if (r >= n ? r = 0 : (e[0] += 4 * i.v, i.ka = r - i.j, i.U = i.va - i.v, i.T = n - r, r = 1), r) {
                if (u = u[0], 11 > (r = a.ca).S) {
                    var c = r.f.RGBA,
                        s = (n = r.S, e = i.U, i = i.T, l = c.eb, c.A),
                        h = i;
                    for (c = c.fb + a.Ma * c.A; 0 < h--;) {
                        var b = f,
                            d = u,
                            v = e,
                            w = l,
                            g = c;
                        switch (n) {
                            case Pn:
                                Tr(b, d, v, w, g);
                                break;
                            case mn:
                                Ur(b, d, v, w, g);
                                break;
                            case Ln:
                                Ur(b, d, v, w, g), fn(w, g, 0, v, 1, 0);
                                break;
                            case xn:
                                Wr(b, d, v, w, g);
                                break;
                            case kn:
                                $(b, d, v, w, g, 1);
                                break;
                            case Rn:
                                $(b, d, v, w, g, 1), fn(w, g, 0, v, 1, 0);
                                break;
                            case In:
                                $(b, d, v, w, g, 0);
                                break;
                            case yn:
                                $(b, d, v, w, g, 0), fn(w, g, 1, v, 1, 0);
                                break;
                            case An:
                                jr(b, d, v, w, g);
                                break;
                            case Bn:
                                jr(b, d, v, w, g), un(w, g, v, 1, 0);
                                break;
                            case Vn:
                                Hr(b, d, v, w, g);
                                break;
                            default:
                                x(0)
                        }
                        u += o, c += s
                    }
                    a.Ma += i
                } else alert("todo:EmitRescaledRowsYUVA");
                x(a.Ma <= r.height)
            }
        }
        a.C = t, x(a.C <= a.i)
    }

    function ga(a) {
        var t;
        if (0 < a.ua) return 0;
        for (t = 0; t < a.Wb; ++t) {
            var r = a.Ya[t].G,
                n = a.Ya[t].H;
            if (0 < r[1][n[1] + 0].g || 0 < r[2][n[2] + 0].g || 0 < r[3][n[3] + 0].g) return 0
        }
        return 1
    }

    function pa(a, t, r, n, e, i) {
        if (0 != a.Z) {
            var f = a.qd,
                u = a.rd;
            for (x(null != Qn[a.Z]); t < r; ++t) Qn[a.Z](f, u, n, e, n, e, i), f = n, u = e, e += i;
            a.qd = f, a.rd = u
        }
    }

    function Pa(a, t) {
        var r = a.l.ma,
            n = 0 == r.Z || 1 == r.Z ? a.l.j : a.C;
        n = a.C < n ? n : a.C;
        if (x(t <= a.l.o), t > n) {
            var e = a.l.width,
                i = r.ca,
                f = r.tb + e * n,
                u = a.V,
                o = a.Ba + a.c * n,
                l = a.gc;
            x(1 == a.ab), x(3 == l[0].hc), Er(l[0], n, t, u, o, i, f), pa(r, n, t, i, f, e)
        }
        a.C = a.Ma = t
    }

    function ma(a, t, r, n, e, i, f) {
        var u = a.$ / n,
            o = a.$ % n,
            l = a.m,
            c = a.s,
            s = r + a.$,
            h = s;
        e = r + n * e;
        var b = r + n * i,
            p = 280 + c.ua,
            P = a.Pb ? u : 16777216,
            m = 0 < c.ua ? c.Wa : null,
            k = c.wc,
            I = s < b ? ba(c, o, u) : null;
        x(a.C < i), x(b <= e);
        var A = !1;
        a: for (;;) {
            for (; A || s < b;) {
                var V = 0;
                if (u >= P) {
                    var L = s - r;
                    x((P = a).Pb), P.wd = P.m, P.xd = L, 0 < P.s.ua && B(P.s.Wa, P.s.vb), P = u + Un
                }
                if (o & k || (I = ba(c, o, u)), x(null != I), I.Qb && (t[s] = I.qb, A = !0), !A)
                    if (g(l), I.jc) {
                        V = l, L = t;
                        var R = s,
                            y = I.pd[d(V) & xr - 1];
                        x(I.jc), 256 > y.g ? (w(V, V.u + y.g), L[R] = y.value, V = 0) : (w(V, V.u + y.g - 256), x(256 <= y.value), V = y.value), 0 == V && (A = !0)
                    } else V = sa(I.G[0], I.H[0], l);
                if (l.h) break;
                if (A || 256 > V) {
                    if (!A)
                        if (I.nd) t[s] = (I.qb | V << 8) >>> 0;
                        else {
                            if (g(l), A = sa(I.G[1], I.H[1], l), g(l), L = sa(I.G[2], I.H[2], l), R = sa(I.G[3], I.H[3], l), l.h) break;
                            t[s] = (R << 24 | A << 16 | V << 8 | L) >>> 0
                        }
                    if (A = !1, ++s, ++o >= n && (o = 0, ++u, null != f && u <= i && !(u % 16) && f(a, u), null != m))
                        for (; h < s;) V = t[h++], m.X[(506832829 * V & 4294967295) >>> m.Mb] = V
                } else if (280 > V) {
                    if (V = la(V - 256, l), L = sa(I.G[4], I.H[4], l), g(l), L = ca(n, L = la(L, l)), l.h) break;
                    if (s - r < L || e - s < V) break a;
                    for (R = 0; R < V; ++R) t[s + R] = t[s + R - L];
                    for (s += V, o += V; o >= n;) o -= n, ++u, null != f && u <= i && !(u % 16) && f(a, u);
                    if (x(s <= e), o & k && (I = ba(c, o, u)), null != m)
                        for (; h < s;) V = t[h++], m.X[(506832829 * V & 4294967295) >>> m.Mb] = V
                } else {
                    if (!(V < p)) break a;
                    for (A = V - 280, x(null != m); h < s;) V = t[h++], m.X[(506832829 * V & 4294967295) >>> m.Mb] = V;
                    V = s, x(!(A >>> (L = m).Xa)), t[V] = L.X[A], A = !0
                }
                A || x(l.h == v(l))
            }
            if (a.Pb && l.h && s < e) x(a.m.h), a.a = 5, a.m = a.wd, a.$ = a.xd, 0 < a.s.ua && B(a.s.vb, a.s.Wa);
            else {
                if (l.h) break a;
                null != f && f(a, u > i ? i : u), a.a = 0, a.$ = s - r
            }
            return 1
        }
        return a.a = 3, 0
    }

    function xa(a) {
        x(null != a), a.vc = null, a.yc = null, a.Ya = null;
        var t = a.Wa;
        null != t && (t.X = null), a.vb = null, x(null != a)
    }

    function ka() { var a = new function() { this.xb = this.a = 0, this.l = new Fa, this.ca = new aa, this.V = [], this.Ba = 0, this.Ta = [], this.Ua = 0, this.m = new b, this.Pb = 0, this.wd = new b, this.Ma = this.$ = this.C = this.i = this.c = this.xd = 0, this.s = new function() { this.ua = 0, this.Wa = new G, this.vb = new G, this.md = this.xc = this.wc = 0, this.vc = [], this.Wb = 0, this.Ya = new i, this.yc = new n }, this.ab = 0, this.gc = wa(4, Nt), this.Oc = 0 }; return null == a ? null : (a.a = 0, a.xb = qn, q("Predictor", "VP8LPredictors"), q("Predictor", "VP8LPredictors_C"), q("PredictorAdd", "VP8LPredictorsAdd"), q("PredictorAdd", "VP8LPredictorsAdd_C"), Br = _, Cr = N, Tr = Y, Ur = z, jr = J, Hr = X, Wr = Z, self.VP8LMapColor32b = Gr, self.VP8LMapColor8b = Dr, a) }

    function Ia(a, t, e, f, u) {
        var o = 1,
            l = [a],
            c = [t],
            h = f.m,
            b = f.s,
            v = null,
            p = 0;
        a: for (;;) {
            if (e)
                for (; o && s(h, 1);) {
                    var P = l,
                        m = c,
                        k = f,
                        I = 1,
                        A = k.m,
                        L = k.gc[k.ab],
                        R = s(A, 2);
                    if (k.Oc & 1 << R) o = 0;
                    else {
                        switch (k.Oc |= 1 << R, L.hc = R, L.Ea = P[0], L.nc = m[0], L.K = [null], ++k.ab, x(4 >= k.ab), R) {
                            case 0:
                            case 1:
                                L.b = s(A, 3) + 2, I = Ia(D(L.Ea, L.b), D(L.nc, L.b), 0, k, L.K), L.K = L.K[0];
                                break;
                            case 3:
                                var B, G = s(A, 8) + 1,
                                    E = 16 < G ? 0 : 4 < G ? 1 : 2 < G ? 2 : 3;
                                if (P[0] = D(L.Ea, E), L.b = E, B = I = Ia(G, 1, 0, k, L.K)) {
                                    var C, T = G,
                                        U = L,
                                        j = 1 << (8 >> U.b),
                                        H = V(j);
                                    if (null == H) B = 0;
                                    else {
                                        var W = U.K[0],
                                            S = U.w;
                                        for (H[0] = U.K[0][0], C = 1; C < 1 * T; ++C) H[C] = F(W[S + C], H[C - 1]);
                                        for (; C < 4 * j; ++C) H[C] = 0;
                                        U.K[0] = null, U.K[0] = H, B = 1
                                    }
                                }
                                I = B;
                                break;
                            case 2:
                                break;
                            default:
                                x(0)
                        }
                        o = I
                    }
                }
            if (l = l[0], c = c[0], o && s(h, 1) && !(o = 1 <= (p = s(h, 4)) && 11 >= p)) { f.a = 3; break a }
            var _;
            if (_ = o) t: {
                var O, N, K, Y = f,
                    z = l,
                    J = c,
                    X = p,
                    Z = e,
                    $ = Y.m,
                    q = Y.s,
                    Q = [null],
                    aa = 1,
                    ta = 0,
                    ra = Tn[X];r: for (;;) {
                    if (Z && s($, 1)) {
                        var na = s($, 3) + 2,
                            ea = D(z, na),
                            ia = D(J, na),
                            fa = ea * ia;
                        if (!Ia(ea, ia, 0, Y, Q)) break r;
                        for (Q = Q[0], q.xc = na, O = 0; O < fa; ++O) {
                            var ua = Q[O] >> 8 & 65535;
                            Q[O] = ua, ua >= aa && (aa = ua + 1)
                        }
                    }
                    if ($.h) break r;
                    for (N = 0; 5 > N; ++N) { var oa = En[N];!N && 0 < X && (oa += 1 << X), ta < oa && (ta = oa) }
                    var la = wa(aa * ra, n),
                        ca = aa,
                        sa = wa(ca, i);
                    if (null == sa) var ba = null;
                    else x(65536 >= ca), ba = sa;
                    var da = V(ta);
                    if (null == ba || null == da || null == la) { Y.a = 1; break r }
                    var va = la;
                    for (O = K = 0; O < aa; ++O) {
                        var ga = ba[O],
                            pa = ga.G,
                            Pa = ga.H,
                            ka = 0,
                            Aa = 1,
                            Va = 0;
                        for (N = 0; 5 > N; ++N) {
                            oa = En[N], pa[N] = va, Pa[N] = K, !N && 0 < X && (oa += 1 << X);
                            n: {
                                var La, Ra = oa,
                                    ya = Y,
                                    Ba = da,
                                    Ma = va,
                                    Ga = K,
                                    Ea = 0,
                                    Da = ya.m,
                                    Fa = s(Da, 1);
                                if (M(Ba, 0, 0, Ra), Fa) {
                                    var Ca = s(Da, 1) + 1,
                                        Ta = s(Da, 0 == s(Da, 1) ? 1 : 8);
                                    Ba[Ta] = 1, 2 == Ca && (Ba[Ta = s(Da, 8)] = 1);
                                    var Ua = 1
                                } else {
                                    var ja = V(19),
                                        Ha = s(Da, 4) + 4;
                                    if (19 < Ha) { ya.a = 3; var Wa = 0; break n }
                                    for (La = 0; La < Ha; ++La) ja[Fn[La]] = s(Da, 3);
                                    var Sa = void 0,
                                        _a = void 0,
                                        Oa = ya,
                                        Na = ja,
                                        Ka = Ra,
                                        Ya = Ba,
                                        za = 0,
                                        Ja = Oa.m,
                                        Xa = 8,
                                        Za = wa(128, n);
                                    e: for (; r(Za, 0, 7, Na, 19);) {
                                        if (s(Ja, 1)) { if ((Sa = 2 + s(Ja, 2 + 2 * s(Ja, 3))) > Ka) break e } else Sa = Ka;
                                        for (_a = 0; _a < Ka && Sa--;) {
                                            g(Ja);
                                            var $a = Za[0 + (127 & d(Ja))];
                                            w(Ja, Ja.u + $a.g);
                                            var qa = $a.value;
                                            if (16 > qa) Ya[_a++] = qa, 0 != qa && (Xa = qa);
                                            else {
                                                var Qa = 16 == qa,
                                                    at = qa - 16,
                                                    tt = Gn[at],
                                                    rt = s(Ja, Mn[at]) + tt;
                                                if (_a + rt > Ka) break e;
                                                for (var nt = Qa ? Xa : 0; 0 < rt--;) Ya[_a++] = nt
                                            }
                                        }
                                        za = 1;
                                        break e
                                    }
                                    za || (Oa.a = 3), Ua = za
                                }(Ua = Ua && !Da.h) && (Ea = r(Ma, Ga, 8, Ba, Ra)),
                                Ua && 0 != Ea ? Wa = Ea : (ya.a = 3, Wa = 0)
                            }
                            if (0 == Wa) break r;
                            if (Aa && 1 == Dn[N] && (Aa = 0 == va[K].g), ka += va[K].g, K += Wa, 3 >= N) {
                                var et, it = da[0];
                                for (et = 1; et < oa; ++et) da[et] > it && (it = da[et]);
                                Va += it
                            }
                        }
                        if (ga.nd = Aa, ga.Qb = 0, Aa && (ga.qb = (pa[3][Pa[3] + 0].value << 24 | pa[1][Pa[1] + 0].value << 16 | pa[2][Pa[2] + 0].value) >>> 0, 0 == ka && 256 > pa[0][Pa[0] + 0].value && (ga.Qb = 1, ga.qb += pa[0][Pa[0] + 0].value << 8)), ga.jc = !ga.Qb && 6 > Va, ga.jc) {
                            var ft, ut = ga;
                            for (ft = 0; ft < xr; ++ft) {
                                var ot = ft,
                                    lt = ut.pd[ot],
                                    ct = ut.G[0][ut.H[0] + ot];
                                256 <= ct.value ? (lt.g = ct.g + 256, lt.value = ct.value) : (lt.g = 0, lt.value = 0, ot >>= ha(ct, 8, lt), ot >>= ha(ut.G[1][ut.H[1] + ot], 16, lt), ot >>= ha(ut.G[2][ut.H[2] + ot], 0, lt), ha(ut.G[3][ut.H[3] + ot], 24, lt))
                            }
                        }
                    }
                    q.vc = Q, q.Wb = aa, q.Ya = ba, q.yc = la, _ = 1;
                    break t
                }
                _ = 0
            }
            if (!(o = _)) { f.a = 3; break a }
            if (0 < p) { if (b.ua = 1 << p, !y(b.Wa, p)) { f.a = 1, o = 0; break a } } else b.ua = 0;
            var st = f,
                ht = l,
                bt = c,
                dt = st.s,
                vt = dt.xc;
            if (st.c = ht, st.i = bt, dt.md = D(ht, vt), dt.wc = 0 == vt ? -1 : (1 << vt) - 1, e) { f.xb = $n; break a }
            if (null == (v = V(l * c))) { f.a = 1, o = 0; break a }
            o = (o = ma(f, v, 0, l, c, c, null)) && !h.h;
            break a
        }
        return o ? (null != u ? u[0] = v : (x(null == v), x(e)), f.$ = 0, e || xa(b)) : xa(b), o
    }

    function Aa(a, t) {
        var r = a.c * a.i,
            n = r + t + 16 * t;
        return x(a.c <= t), a.V = V(n), null == a.V ? (a.Ta = null, a.Ua = 0, a.a = 1, 0) : (a.Ta = a.V, a.Ua = a.Ba + r + t, 1)
    }

    function Va(a, t) {
        var r = a.C,
            n = t - r,
            e = a.V,
            i = a.Ba + a.c * r;
        for (x(t <= a.l.o); 0 < n;) {
            var f = 16 < n ? 16 : n,
                u = a.l.ma,
                o = a.l.width,
                l = o * f,
                c = u.ca,
                s = u.tb + o * r,
                h = a.Ta,
                b = a.Ua;
            da(a, f, e, i), ln(h, b, c, s, l), pa(u, r, r + f, c, s, o), n -= f, e += f * a.c, r += f
        }
        x(r == t), a.C = a.Ma = t
    }

    function La() { this.Yb = wb() }

    function Ra() { this.ld = this.La = this.dd = this.tc = 0 }

    function ya() { this.Na = this.la = 0 }

    function Ba() { this.Sc = [0, 0], this.Eb = [0, 0], this.Qc = [0, 0], this.ia = this.lc = 0 }

    function Ma() { this.ad = V(384), this.Za = 0, this.Ob = V(16), this.$b = this.Ad = this.ia = this.Gc = this.Hc = this.Dd = 0 }

    function Ga() { this.y = V(16), this.f = V(8), this.ea = V(8) }

    function Ea() { this.cb = this.a = 0, this.sc = "", this.m = new h, this.Od = new function() { this.ub = this.yd = this.td = this.Rb = 0 }, this.Kc = new function() { this.Kd = this.Ld = this.Ud = this.Td = this.i = this.c = 0 }, this.ed = new function() { this.Pc = this.wb = this.Tb = this.zd = 0, this.vd = new V(4), this.od = new V(4) }, this.Qa = new function() { this.Fb = this.Bb = this.Cb = 0, this.Zb = V(4), this.Lb = V(4) }, this.Ic = this.$c = this.Aa = 0, this.D = new function() { this.uc = this.M = this.Nb = 0, this.wa = Array(new Ra), this.Y = 0, this.ya = Array(new Ma), this.aa = 0, this.l = new Fa }, this.Xb = this.Va = this.Hb = this.zb = this.yb = this.Ub = this.za = 0, this.Jc = wa(8, h), this.ia = 0, new function() { V(55) }, this.pb = wa(4, Ba), this.Pa = new function() { this.jb = V(3), this.Wc = Ed([4, 8], La), this.Xc = Ed([4, 17], La) }, this.Bd = this.kc = 0, this.Ac = [], this.Bc = 0, this.zc = [0, 0, 0, 0], this.Gd = Array(new Ga), this.Hd = 0, this.rb = Array(new ya), this.sb = 0, this.wa = Array(new Ra), this.Y = 0, this.oc = [], this.pc = 0, this.sa = [], this.ta = 0, this.qa = [], this.ra = 0, this.Ha = [], this.B = this.R = this.Ia = 0, this.Ec = [], this.M = this.ja = this.Vb = this.Fc = 0, this.ya = Array(new Ma), this.L = this.aa = 0, this.gd = Ed([4, 2], Ra), this.ga = null, this.Fa = [], this.Cc = this.qc = this.P = 0, this.Gb = [], this.Uc = 0, this.mb = [], this.nb = 0, this.rc = [], this.Ga = this.Vc = 0 }

    function Da(a, t) { return 0 > a ? 0 : a > t ? t : a }

    function Fa() { this.T = this.U = this.ka = this.height = this.width = 0, this.y = [], this.f = [], this.ea = [], this.Rc = this.fa = this.W = this.N = this.O = 0, this.ma = "void", this.put = "VP8IoPutHook", this.ac = "VP8IoSetupHook", this.bc = "VP8IoTeardownHook", this.ha = this.Kb = 0, this.data = [], this.hb = this.ib = this.da = this.o = this.j = this.va = this.v = this.Da = this.ob = this.w = 0, this.F = [], this.J = 0 }

    function Ca(a, t, r) { return 0 == a.a && (a.a = t, a.sc = r, a.cb = 0), 0 }

    function Ta(a, t, r) { return 3 <= r && 157 == a[t + 0] && 1 == a[t + 1] && 42 == a[t + 2] }

    function Ua(a, t) {
        if (null == a) return 0;
        if (a.a = 0, a.sc = "OK", null == t) return Ca(a, 2, "null VP8Io passed to VP8GetHeaders()");
        var r = t.data,
            n = t.w,
            e = t.ha;
        if (4 > e) return Ca(a, 7, "Truncated header.");
        var i = r[n + 0] | r[n + 1] << 8 | r[n + 2] << 16,
            l = a.Od;
        if (l.Rb = !(1 & i), l.td = i >> 1 & 7, l.yd = i >> 4 & 1, l.ub = i >> 5, 3 < l.td) return Ca(a, 3, "Incorrect keyframe parameters.");
        if (!l.yd) return Ca(a, 4, "Frame not displayable.");
        n += 3, e -= 3;
        var c = a.Kc;
        if (l.Rb) {
            if (7 > e) return Ca(a, 7, "cannot parse picture header");
            if (!Ta(r, n, e)) return Ca(a, 3, "Bad code word");
            c.c = 16383 & (r[n + 4] << 8 | r[n + 3]), c.Td = r[n + 4] >> 6, c.i = 16383 & (r[n + 6] << 8 | r[n + 5]), c.Ud = r[n + 6] >> 6, n += 7, e -= 7, a.za = c.c + 15 >> 4, a.Ub = c.i + 15 >> 4, t.width = c.c, t.height = c.i, t.Da = 0, t.j = 0, t.v = 0, t.va = t.width, t.o = t.height, t.da = 0, t.ib = t.width, t.hb = t.height, t.U = t.width, t.T = t.height, M((i = a.Pa).jb, 0, 255, i.jb.length), x(null != (i = a.Qa)), i.Cb = 0, i.Bb = 0, i.Fb = 1, M(i.Zb, 0, 0, i.Zb.length), M(i.Lb, 0, 0, i.Lb)
        }
        if (l.ub > e) return Ca(a, 7, "bad partition length");
        f(i = a.m, r, n, l.ub), n += l.ub, e -= l.ub, l.Rb && (c.Ld = P(i), c.Kd = P(i)), c = a.Qa;
        var s, h = a.Pa;
        if (x(null != i), x(null != c), c.Cb = P(i), c.Cb) {
            if (c.Bb = P(i), P(i)) { for (c.Fb = P(i), s = 0; 4 > s; ++s) c.Zb[s] = P(i) ? o(i, 7) : 0; for (s = 0; 4 > s; ++s) c.Lb[s] = P(i) ? o(i, 6) : 0 }
            if (c.Bb)
                for (s = 0; 3 > s; ++s) h.jb[s] = P(i) ? u(i, 8) : 255
        } else c.Bb = 0;
        if (i.Ka) return Ca(a, 3, "cannot parse segment header");
        if ((c = a.ed).zd = P(i), c.Tb = u(i, 6), c.wb = u(i, 3), c.Pc = P(i), c.Pc && P(i)) { for (h = 0; 4 > h; ++h) P(i) && (c.vd[h] = o(i, 6)); for (h = 0; 4 > h; ++h) P(i) && (c.od[h] = o(i, 6)) }
        if (a.L = 0 == c.Tb ? 0 : c.zd ? 1 : 2, i.Ka) return Ca(a, 3, "cannot parse filter header");
        var b = e;
        if (e = s = n, n = s + b, c = b, a.Xb = (1 << u(a.m, 2)) - 1, b < 3 * (h = a.Xb)) r = 7;
        else {
            for (s += 3 * h, c -= 3 * h, b = 0; b < h; ++b) {
                var d = r[e + 0] | r[e + 1] << 8 | r[e + 2] << 16;
                d > c && (d = c), f(a.Jc[+b], r, s, d), s += d, c -= d, e += 3
            }
            f(a.Jc[+h], r, s, c), r = s < n ? 0 : 5
        }
        if (0 != r) return Ca(a, r, "cannot parse partitions");
        for (r = u(s = a.m, 7), e = P(s) ? o(s, 4) : 0, n = P(s) ? o(s, 4) : 0, c = P(s) ? o(s, 4) : 0, h = P(s) ? o(s, 4) : 0, s = P(s) ? o(s, 4) : 0, b = a.Qa, d = 0; 4 > d; ++d) {
            if (b.Cb) {
                var v = b.Zb[d];
                b.Fb || (v += r)
            } else {
                if (0 < d) { a.pb[d] = a.pb[0]; continue }
                v = r
            }
            var w = a.pb[d];
            w.Sc[0] = jn[Da(v + e, 127)], w.Sc[1] = Hn[Da(v + 0, 127)], w.Eb[0] = 2 * jn[Da(v + n, 127)], w.Eb[1] = 101581 * Hn[Da(v + c, 127)] >> 16, 8 > w.Eb[1] && (w.Eb[1] = 8), w.Qc[0] = jn[Da(v + h, 117)], w.Qc[1] = Hn[Da(v + s, 127)], w.lc = v + s
        }
        if (!l.Rb) return Ca(a, 4, "Not a key frame.");
        for (P(i), l = a.Pa, r = 0; 4 > r; ++r) {
            for (e = 0; 8 > e; ++e)
                for (n = 0; 3 > n; ++n)
                    for (c = 0; 11 > c; ++c) h = m(i, Yn[r][e][n][c]) ? u(i, 8) : Nn[r][e][n][c], l.Wc[r][e].Yb[n][c] = h;
            for (e = 0; 17 > e; ++e) l.Xc[r][e] = l.Wc[r][zn[e]]
        }
        return a.kc = P(i), a.kc && (a.Bd = u(i, 8)), a.cb = 1
    }

    function ja(a, t, r, n, e, i, f) {
        var u = t[e].Yb[r];
        for (r = 0; 16 > e; ++e) {
            if (!m(a, u[r + 0])) return e;
            for (; !m(a, u[r + 1]);)
                if (u = t[++e].Yb[0], r = 0, 16 == e) return 16;
            var o = t[e + 1].Yb;
            if (m(a, u[r + 2])) {
                var l = a,
                    c = 0;
                if (m(l, (h = u)[(s = r) + 3]))
                    if (m(l, h[s + 6])) {
                        for (u = 0, s = 2 * (c = m(l, h[s + 8])) + (h = m(l, h[s + 9 + c])), c = 0, h = Sn[s]; h[u]; ++u) c += c + m(l, h[u]);
                        c += 3 + (8 << s)
                    } else m(l, h[s + 7]) ? (c = 7 + 2 * m(l, 165), c += m(l, 145)) : c = 5 + m(l, 159);
                else c = m(l, h[s + 4]) ? 3 + m(l, h[s + 5]) : 2;
                u = o[2]
            } else c = 1, u = o[1];
            o = f + _n[e], 0 > (l = a).b && p(l);
            var s, h = l.b,
                b = (s = l.Ca >> 1) - (l.I >> h) >> 31;
            --l.b, l.Ca += b, l.Ca |= 1, l.I -= (s + 1 & b) << h, i[o] = ((c ^ b) - b) * n[(0 < e) + 0]
        }
        return 16
    }

    function Ha(a) {
        var t = a.rb[a.sb - 1];
        t.la = 0, t.Na = 0, M(a.zc, 0, 0, a.zc.length), a.ja = 0
    }

    function Wa(a, t) {
        if (null == a) return 0;
        if (null == t) return Ca(a, 2, "NULL VP8Io parameter in VP8Decode().");
        if (!a.cb && !Ua(a, t)) return 0;
        if (x(a.cb), null == t.ac || t.ac(t)) {
            t.ob && (a.L = 0);
            var r = ke[a.L];
            if (2 == a.L ? (a.yb = 0, a.zb = 0) : (a.yb = t.v - r >> 4, a.zb = t.j - r >> 4, 0 > a.yb && (a.yb = 0), 0 > a.zb && (a.zb = 0)), a.Va = t.o + 15 + r >> 4, a.Hb = t.va + 15 + r >> 4, a.Hb > a.za && (a.Hb = a.za), a.Va > a.Ub && (a.Va = a.Ub), 0 < a.L) {
                var n = a.ed;
                for (r = 0; 4 > r; ++r) {
                    var e;
                    if (a.Qa.Cb) {
                        var i = a.Qa.Lb[r];
                        a.Qa.Fb || (i += n.Tb)
                    } else i = n.Tb;
                    for (e = 0; 1 >= e; ++e) {
                        var f = a.gd[r][e],
                            u = i;
                        if (n.Pc && (u += n.vd[0], e && (u += n.od[0])), 0 < (u = 0 > u ? 0 : 63 < u ? 63 : u)) {
                            var o = u;
                            0 < n.wb && ((o = 4 < n.wb ? o >> 2 : o >> 1) > 9 - n.wb && (o = 9 - n.wb)), 1 > o && (o = 1), f.dd = o, f.tc = 2 * u + o, f.ld = 40 <= u ? 2 : 15 <= u ? 1 : 0
                        } else f.tc = 0;
                        f.La = e
                    }
                }
            }
            r = 0
        } else Ca(a, 6, "Frame setup failed"), r = a.a;
        if (r = 0 == r) {
            if (r) {
                a.$c = 0, 0 < a.Aa || (a.Ic = Ae);
                a: {
                    r = a.Ic;n = 4 * (o = a.za);
                    var l = 32 * o,
                        c = o + 1,
                        s = 0 < a.L ? o * (0 < a.Aa ? 2 : 1) : 0,
                        h = (2 == a.Aa ? 2 : 1) * o;
                    if ((f = n + 832 + (e = 3 * (16 * r + ke[a.L]) / 2 * l) + (i = null != a.Fa && 0 < a.Fa.length ? a.Kc.c * a.Kc.i : 0)) != f) r = 0;
                    else {
                        if (f > a.Vb) {
                            if (a.Vb = 0, a.Ec = V(f), a.Fc = 0, null == a.Ec) { r = Ca(a, 1, "no memory during frame initialization."); break a }
                            a.Vb = f
                        }
                        f = a.Ec, u = a.Fc, a.Ac = f, a.Bc = u, u += n, a.Gd = wa(l, Ga), a.Hd = 0, a.rb = wa(c + 1, ya), a.sb = 1, a.wa = s ? wa(s, Ra) : null, a.Y = 0, a.D.Nb = 0, a.D.wa = a.wa, a.D.Y = a.Y, 0 < a.Aa && (a.D.Y += o), x(!0), a.oc = f, a.pc = u, u += 832, a.ya = wa(h, Ma), a.aa = 0, a.D.ya = a.ya, a.D.aa = a.aa, 2 == a.Aa && (a.D.aa += o), a.R = 16 * o, a.B = 8 * o, o = (l = ke[a.L]) * a.R, l = l / 2 * a.B, a.sa = f, a.ta = u + o, a.qa = a.sa, a.ra = a.ta + 16 * r * a.R + l, a.Ha = a.qa, a.Ia = a.ra + 8 * r * a.B + l, a.$c = 0, u += e, a.mb = i ? f : null, a.nb = i ? u : null, x(u + i <= a.Fc + a.Vb), Ha(a), M(a.Ac, a.Bc, 0, n), r = 1
                    }
                }
                if (r) {
                    if (t.ka = 0, t.y = a.sa, t.O = a.ta, t.f = a.qa, t.N = a.ra, t.ea = a.Ha, t.Vd = a.Ia, t.fa = a.R, t.Rc = a.B, t.F = null, t.J = 0, !dn) {
                        for (r = -255; 255 >= r; ++r) cn[255 + r] = 0 > r ? -r : r;
                        for (r = -1020; 1020 >= r; ++r) sn[1020 + r] = -128 > r ? -128 : 127 < r ? 127 : r;
                        for (r = -112; 112 >= r; ++r) hn[112 + r] = -16 > r ? -16 : 15 < r ? 15 : r;
                        for (r = -255; 510 >= r; ++r) bn[255 + r] = 0 > r ? 0 : 255 < r ? 255 : r;
                        dn = 1
                    }
                    Sr = Za, _r = Ya, Nr = za, Kr = Ja, Yr = Xa, Or = Ka, zr = Ct, Jr = Tt, Xr = Ht, Zr = Wt, $r = Ut, qr = jt, Qr = St, an = _t, tn = Bt, rn = Mt, nn = Gt, en = Et, Xn[0] = st, Xn[1] = qa, Xn[2] = lt, Xn[3] = ct, Xn[4] = ht, Xn[5] = dt, Xn[6] = bt, Xn[7] = vt, Xn[8] = gt, Xn[9] = wt, Jn[0] = et, Jn[1] = at, Jn[2] = tt, Jn[3] = rt, Jn[4] = it, Jn[5] = ft, Jn[6] = ut, Zn[0] = xt, Zn[1] = Qa, Zn[2] = pt, Zn[3] = Pt, Zn[4] = It, Zn[5] = kt, Zn[6] = At, r = 1
                } else r = 0
            }
            r && (r = function(a, t) {
                for (a.M = 0; a.M < a.Va; ++a.M) {
                    var r, n = a.Jc[a.M & a.Xb],
                        e = a.m,
                        i = a;
                    for (r = 0; r < i.za; ++r) {
                        var f = e,
                            u = i,
                            o = u.Ac,
                            l = u.Bc + 4 * r,
                            c = u.zc,
                            s = u.ya[u.aa + r];
                        if (u.Qa.Bb ? s.$b = m(f, u.Pa.jb[0]) ? 2 + m(f, u.Pa.jb[2]) : m(f, u.Pa.jb[1]) : s.$b = 0, u.kc && (s.Ad = m(f, u.Bd)), s.Za = !m(f, 145) + 0, s.Za) {
                            var h = s.Ob,
                                b = 0;
                            for (u = 0; 4 > u; ++u) {
                                var d, v = c[0 + u];
                                for (d = 0; 4 > d; ++d) {
                                    v = Kn[o[l + d]][v];
                                    for (var w = On[m(f, v[0])]; 0 < w;) w = On[2 * w + m(f, v[w])];
                                    v = -w, o[l + d] = v
                                }
                                I(h, b, o, l, 4), b += 4, c[0 + u] = v
                            }
                        } else v = m(f, 156) ? m(f, 128) ? 1 : 3 : m(f, 163) ? 2 : 0, s.Ob[0] = v, M(o, l, v, 4), M(c, 0, v, 4);
                        s.Dd = m(f, 142) ? m(f, 114) ? m(f, 183) ? 1 : 3 : 2 : 0
                    }
                    if (i.m.Ka) return Ca(a, 7, "Premature end-of-partition0 encountered.");
                    for (; a.ja < a.za; ++a.ja) {
                        if (i = n, f = (e = a).rb[e.sb - 1], o = e.rb[e.sb + e.ja], r = e.ya[e.aa + e.ja], l = e.kc ? r.Ad : 0) f.la = o.la = 0, r.Za || (f.Na = o.Na = 0), r.Hc = 0, r.Gc = 0, r.ia = 0;
                        else {
                            var g, p;
                            if (f = o, o = i, l = e.Pa.Xc, c = e.ya[e.aa + e.ja], s = e.pb[c.$b], u = c.ad, h = 0, b = e.rb[e.sb - 1], v = d = 0, M(u, h, 0, 384), c.Za) var P = 0,
                                k = l[3];
                            else {
                                w = V(16);
                                var A = f.Na + b.Na;
                                if (A = Wn(o, l[1], A, s.Eb, 0, w, 0), f.Na = b.Na = (0 < A) + 0, 1 < A) Sr(w, 0, u, h);
                                else { var L = w[0] + 3 >> 3; for (w = 0; 256 > w; w += 16) u[h + w] = L }
                                P = 1, k = l[0]
                            }
                            var R = 15 & f.la,
                                y = 15 & b.la;
                            for (w = 0; 4 > w; ++w) {
                                var B = 1 & y;
                                for (L = p = 0; 4 > L; ++L) R = R >> 1 | (B = (A = Wn(o, k, A = B + (1 & R), s.Sc, P, u, h)) > P) << 7, p = p << 2 | (3 < A ? 3 : 1 < A ? 2 : 0 != u[h + 0]), h += 16;
                                R >>= 4, y = y >> 1 | B << 7, d = (d << 8 | p) >>> 0
                            }
                            for (k = R, P = y >> 4, g = 0; 4 > g; g += 2) {
                                for (p = 0, R = f.la >> 4 + g, y = b.la >> 4 + g, w = 0; 2 > w; ++w) {
                                    for (B = 1 & y, L = 0; 2 > L; ++L) A = B + (1 & R), R = R >> 1 | (B = 0 < (A = Wn(o, l[2], A, s.Qc, 0, u, h))) << 3, p = p << 2 | (3 < A ? 3 : 1 < A ? 2 : 0 != u[h + 0]), h += 16;
                                    R >>= 2, y = y >> 1 | B << 5
                                }
                                v |= p << 4 * g, k |= R << 4 << g, P |= (240 & y) << g
                            }
                            f.la = k, b.la = P, c.Hc = d, c.Gc = v, c.ia = 43690 & v ? 0 : s.ia, l = !(d | v)
                        }
                        if (0 < e.L && (e.wa[e.Y + e.ja] = e.gd[r.$b][r.Za], e.wa[e.Y + e.ja].La |= !l), i.Ka) return Ca(a, 7, "Premature end-of-file encountered.")
                    }
                    if (Ha(a), e = t, i = 1, r = (n = a).D, f = 0 < n.L && n.M >= n.zb && n.M <= n.Va, 0 == n.Aa) a: {
                        if (r.M = n.M, r.uc = f, wr(n, r), i = 1, r = (p = n.D).Nb, f = (v = ke[n.L]) * n.R, o = v / 2 * n.B, w = 16 * r * n.R, L = 8 * r * n.B, l = n.sa, c = n.ta - f + w, s = n.qa, u = n.ra - o + L, h = n.Ha, b = n.Ia - o + L, y = 0 == (R = p.M), d = R >= n.Va - 1, 2 == n.Aa && wr(n, p), p.uc)
                            for (B = (A = n).D.M, x(A.D.uc), p = A.yb; p < A.Hb; ++p) {
                                P = p, k = B;
                                var G = (E = (S = A).D).Nb;
                                g = S.R;
                                var E = E.wa[E.Y + P],
                                    D = S.sa,
                                    F = S.ta + 16 * G * g + 16 * P,
                                    C = E.dd,
                                    T = E.tc;
                                if (0 != T)
                                    if (x(3 <= T), 1 == S.L) 0 < P && rn(D, F, g, T + 4), E.La && en(D, F, g, T), 0 < k && tn(D, F, g, T + 4), E.La && nn(D, F, g, T);
                                    else {
                                        var U = S.B,
                                            j = S.qa,
                                            H = S.ra + 8 * G * U + 8 * P,
                                            W = S.Ha,
                                            S = S.Ia + 8 * G * U + 8 * P;
                                        G = E.ld, 0 < P && (Jr(D, F, g, T + 4, C, G), Zr(j, H, W, S, U, T + 4, C, G)), E.La && (qr(D, F, g, T, C, G), an(j, H, W, S, U, T, C, G)), 0 < k && (zr(D, F, g, T + 4, C, G), Xr(j, H, W, S, U, T + 4, C, G)), E.La && ($r(D, F, g, T, C, G), Qr(j, H, W, S, U, T, C, G))
                                    }
                            }
                        if (n.ia && alert("todo:DitherRow"), null != e.put) {
                            if (p = 16 * R, R = 16 * (R + 1), y ? (e.y = n.sa, e.O = n.ta + w, e.f = n.qa, e.N = n.ra + L, e.ea = n.Ha, e.W = n.Ia + L) : (p -= v, e.y = l, e.O = c, e.f = s, e.N = u, e.ea = h, e.W = b), d || (R -= v), R > e.o && (R = e.o), e.F = null, e.J = null, null != n.Fa && 0 < n.Fa.length && p < R && (e.J = Jt(n, e, p, R - p), e.F = n.mb, null == e.F && 0 == e.F.length)) { i = Ca(n, 3, "Could not decode alpha data."); break a }
                            p < e.j && (v = e.j - p, p = e.j, x(!(1 & v)), e.O += n.R * v, e.N += n.B * (v >> 1), e.W += n.B * (v >> 1), null != e.F && (e.J += e.width * v)), p < R && (e.O += e.v, e.N += e.v >> 1, e.W += e.v >> 1, null != e.F && (e.J += e.v), e.ka = p - e.j, e.U = e.va - e.v, e.T = R - p, i = e.put(e))
                        }
                        r + 1 != n.Ic || d || (I(n.sa, n.ta - f, l, c + 16 * n.R, f), I(n.qa, n.ra - o, s, u + 8 * n.B, o), I(n.Ha, n.Ia - o, h, b + 8 * n.B, o))
                    }
                    if (!i) return Ca(a, 6, "Output aborted.")
                }
                return 1
            }(a, t)), null != t.bc && t.bc(t), r &= 1
        }
        return r ? (a.cb = 0, r) : 0
    }

    function Sa(a, t, r, n, e) { e = a[t + r + 32 * n] + (e >> 3), a[t + r + 32 * n] = -256 & e ? 0 > e ? 0 : 255 : e }

    function _a(a, t, r, n, e, i) { Sa(a, t, 0, r, n + e), Sa(a, t, 1, r, n + i), Sa(a, t, 2, r, n - i), Sa(a, t, 3, r, n - e) }

    function Oa(a) { return (20091 * a >> 16) + a }

    function Na(a, t, r, n) {
        var e, i = 0,
            f = V(16);
        for (e = 0; 4 > e; ++e) {
            var u = a[t + 0] + a[t + 8],
                o = a[t + 0] - a[t + 8],
                l = (35468 * a[t + 4] >> 16) - Oa(a[t + 12]),
                c = Oa(a[t + 4]) + (35468 * a[t + 12] >> 16);
            f[i + 0] = u + c, f[i + 1] = o + l, f[i + 2] = o - l, f[i + 3] = u - c, i += 4, t++
        }
        for (e = i = 0; 4 > e; ++e) u = (a = f[i + 0] + 4) + f[i + 8], o = a - f[i + 8], l = (35468 * f[i + 4] >> 16) - Oa(f[i + 12]), Sa(r, n, 0, 0, u + (c = Oa(f[i + 4]) + (35468 * f[i + 12] >> 16))), Sa(r, n, 1, 0, o + l), Sa(r, n, 2, 0, o - l), Sa(r, n, 3, 0, u - c), i++, n += 32
    }

    function Ka(a, t, r, n) {
        var e = a[t + 0] + 4,
            i = 35468 * a[t + 4] >> 16,
            f = Oa(a[t + 4]),
            u = 35468 * a[t + 1] >> 16;
        _a(r, n, 0, e + f, a = Oa(a[t + 1]), u), _a(r, n, 1, e + i, a, u), _a(r, n, 2, e - i, a, u), _a(r, n, 3, e - f, a, u)
    }

    function Ya(a, t, r, n, e) { Na(a, t, r, n), e && Na(a, t + 16, r, n + 4) }

    function za(a, t, r, n) { _r(a, t + 0, r, n, 1), _r(a, t + 32, r, n + 128, 1) }

    function Ja(a, t, r, n) {
        var e;
        for (a = a[t + 0] + 4, e = 0; 4 > e; ++e)
            for (t = 0; 4 > t; ++t) Sa(r, n, t, e, a)
    }

    function Xa(a, t, r, n) { a[t + 0] && Kr(a, t + 0, r, n), a[t + 16] && Kr(a, t + 16, r, n + 4), a[t + 32] && Kr(a, t + 32, r, n + 128), a[t + 48] && Kr(a, t + 48, r, n + 128 + 4) }

    function Za(a, t, r, n) {
        var e, i = V(16);
        for (e = 0; 4 > e; ++e) {
            var f = a[t + 0 + e] + a[t + 12 + e],
                u = a[t + 4 + e] + a[t + 8 + e],
                o = a[t + 4 + e] - a[t + 8 + e],
                l = a[t + 0 + e] - a[t + 12 + e];
            i[0 + e] = f + u, i[8 + e] = f - u, i[4 + e] = l + o, i[12 + e] = l - o
        }
        for (e = 0; 4 > e; ++e) f = (a = i[0 + 4 * e] + 3) + i[3 + 4 * e], u = i[1 + 4 * e] + i[2 + 4 * e], o = i[1 + 4 * e] - i[2 + 4 * e], l = a - i[3 + 4 * e], r[n + 0] = f + u >> 3, r[n + 16] = l + o >> 3, r[n + 32] = f - u >> 3, r[n + 48] = l - o >> 3, n += 64
    }

    function $a(a, t, r) {
        var n, e = t - 32,
            i = gn,
            f = 255 - a[e - 1];
        for (n = 0; n < r; ++n) {
            var u, o = i,
                l = f + a[t - 1];
            for (u = 0; u < r; ++u) a[t + u] = o[l + a[e + u]];
            t += 32
        }
    }

    function qa(a, t) { $a(a, t, 4) }

    function Qa(a, t) { $a(a, t, 8) }

    function at(a, t) { $a(a, t, 16) }

    function tt(a, t) { var r; for (r = 0; 16 > r; ++r) I(a, t + 32 * r, a, t - 32, 16) }

    function rt(a, t) { var r; for (r = 16; 0 < r; --r) M(a, t, a[t - 1], 16), t += 32 }

    function nt(a, t, r) { var n; for (n = 0; 16 > n; ++n) M(t, r + 32 * n, a, 16) }

    function et(a, t) {
        var r, n = 16;
        for (r = 0; 16 > r; ++r) n += a[t - 1 + 32 * r] + a[t + r - 32];
        nt(n >> 5, a, t)
    }

    function it(a, t) {
        var r, n = 8;
        for (r = 0; 16 > r; ++r) n += a[t - 1 + 32 * r];
        nt(n >> 4, a, t)
    }

    function ft(a, t) {
        var r, n = 8;
        for (r = 0; 16 > r; ++r) n += a[t + r - 32];
        nt(n >> 4, a, t)
    }

    function ut(a, t) { nt(128, a, t) }

    function ot(a, t, r) { return a + 2 * t + r + 2 >> 2 }

    function lt(a, t) {
        var r, n = t - 32;
        n = new Uint8Array([ot(a[n - 1], a[n + 0], a[n + 1]), ot(a[n + 0], a[n + 1], a[n + 2]), ot(a[n + 1], a[n + 2], a[n + 3]), ot(a[n + 2], a[n + 3], a[n + 4])]);
        for (r = 0; 4 > r; ++r) I(a, t + 32 * r, n, 0, n.length)
    }

    function ct(a, t) {
        var r = a[t - 1],
            n = a[t - 1 + 32],
            e = a[t - 1 + 64],
            i = a[t - 1 + 96];
        k(a, t + 0, 16843009 * ot(a[t - 1 - 32], r, n)), k(a, t + 32, 16843009 * ot(r, n, e)), k(a, t + 64, 16843009 * ot(n, e, i)), k(a, t + 96, 16843009 * ot(e, i, i))
    }

    function st(a, t) { var r, n = 4; for (r = 0; 4 > r; ++r) n += a[t + r - 32] + a[t - 1 + 32 * r]; for (n >>= 3, r = 0; 4 > r; ++r) M(a, t + 32 * r, n, 4) }

    function ht(a, t) {
        var r = a[t - 1 + 0],
            n = a[t - 1 + 32],
            e = a[t - 1 + 64],
            i = a[t - 1 - 32],
            f = a[t + 0 - 32],
            u = a[t + 1 - 32],
            o = a[t + 2 - 32],
            l = a[t + 3 - 32];
        a[t + 0 + 96] = ot(n, e, a[t - 1 + 96]), a[t + 1 + 96] = a[t + 0 + 64] = ot(r, n, e), a[t + 2 + 96] = a[t + 1 + 64] = a[t + 0 + 32] = ot(i, r, n), a[t + 3 + 96] = a[t + 2 + 64] = a[t + 1 + 32] = a[t + 0 + 0] = ot(f, i, r), a[t + 3 + 64] = a[t + 2 + 32] = a[t + 1 + 0] = ot(u, f, i), a[t + 3 + 32] = a[t + 2 + 0] = ot(o, u, f), a[t + 3 + 0] = ot(l, o, u)
    }

    function bt(a, t) {
        var r = a[t + 1 - 32],
            n = a[t + 2 - 32],
            e = a[t + 3 - 32],
            i = a[t + 4 - 32],
            f = a[t + 5 - 32],
            u = a[t + 6 - 32],
            o = a[t + 7 - 32];
        a[t + 0 + 0] = ot(a[t + 0 - 32], r, n), a[t + 1 + 0] = a[t + 0 + 32] = ot(r, n, e), a[t + 2 + 0] = a[t + 1 + 32] = a[t + 0 + 64] = ot(n, e, i), a[t + 3 + 0] = a[t + 2 + 32] = a[t + 1 + 64] = a[t + 0 + 96] = ot(e, i, f), a[t + 3 + 32] = a[t + 2 + 64] = a[t + 1 + 96] = ot(i, f, u), a[t + 3 + 64] = a[t + 2 + 96] = ot(f, u, o), a[t + 3 + 96] = ot(u, o, o)
    }

    function dt(a, t) {
        var r = a[t - 1 + 0],
            n = a[t - 1 + 32],
            e = a[t - 1 + 64],
            i = a[t - 1 - 32],
            f = a[t + 0 - 32],
            u = a[t + 1 - 32],
            o = a[t + 2 - 32],
            l = a[t + 3 - 32];
        a[t + 0 + 0] = a[t + 1 + 64] = i + f + 1 >> 1, a[t + 1 + 0] = a[t + 2 + 64] = f + u + 1 >> 1, a[t + 2 + 0] = a[t + 3 + 64] = u + o + 1 >> 1, a[t + 3 + 0] = o + l + 1 >> 1, a[t + 0 + 96] = ot(e, n, r), a[t + 0 + 64] = ot(n, r, i), a[t + 0 + 32] = a[t + 1 + 96] = ot(r, i, f), a[t + 1 + 32] = a[t + 2 + 96] = ot(i, f, u), a[t + 2 + 32] = a[t + 3 + 96] = ot(f, u, o), a[t + 3 + 32] = ot(u, o, l)
    }

    function vt(a, t) {
        var r = a[t + 0 - 32],
            n = a[t + 1 - 32],
            e = a[t + 2 - 32],
            i = a[t + 3 - 32],
            f = a[t + 4 - 32],
            u = a[t + 5 - 32],
            o = a[t + 6 - 32],
            l = a[t + 7 - 32];
        a[t + 0 + 0] = r + n + 1 >> 1, a[t + 1 + 0] = a[t + 0 + 64] = n + e + 1 >> 1, a[t + 2 + 0] = a[t + 1 + 64] = e + i + 1 >> 1, a[t + 3 + 0] = a[t + 2 + 64] = i + f + 1 >> 1, a[t + 0 + 32] = ot(r, n, e), a[t + 1 + 32] = a[t + 0 + 96] = ot(n, e, i), a[t + 2 + 32] = a[t + 1 + 96] = ot(e, i, f), a[t + 3 + 32] = a[t + 2 + 96] = ot(i, f, u), a[t + 3 + 64] = ot(f, u, o), a[t + 3 + 96] = ot(u, o, l)
    }

    function wt(a, t) {
        var r = a[t - 1 + 0],
            n = a[t - 1 + 32],
            e = a[t - 1 + 64],
            i = a[t - 1 + 96];
        a[t + 0 + 0] = r + n + 1 >> 1, a[t + 2 + 0] = a[t + 0 + 32] = n + e + 1 >> 1, a[t + 2 + 32] = a[t + 0 + 64] = e + i + 1 >> 1, a[t + 1 + 0] = ot(r, n, e), a[t + 3 + 0] = a[t + 1 + 32] = ot(n, e, i), a[t + 3 + 32] = a[t + 1 + 64] = ot(e, i, i), a[t + 3 + 64] = a[t + 2 + 64] = a[t + 0 + 96] = a[t + 1 + 96] = a[t + 2 + 96] = a[t + 3 + 96] = i
    }

    function gt(a, t) {
        var r = a[t - 1 + 0],
            n = a[t - 1 + 32],
            e = a[t - 1 + 64],
            i = a[t - 1 + 96],
            f = a[t - 1 - 32],
            u = a[t + 0 - 32],
            o = a[t + 1 - 32],
            l = a[t + 2 - 32];
        a[t + 0 + 0] = a[t + 2 + 32] = r + f + 1 >> 1, a[t + 0 + 32] = a[t + 2 + 64] = n + r + 1 >> 1, a[t + 0 + 64] = a[t + 2 + 96] = e + n + 1 >> 1, a[t + 0 + 96] = i + e + 1 >> 1, a[t + 3 + 0] = ot(u, o, l), a[t + 2 + 0] = ot(f, u, o), a[t + 1 + 0] = a[t + 3 + 32] = ot(r, f, u), a[t + 1 + 32] = a[t + 3 + 64] = ot(n, r, f), a[t + 1 + 64] = a[t + 3 + 96] = ot(e, n, r), a[t + 1 + 96] = ot(i, e, n)
    }

    function pt(a, t) { var r; for (r = 0; 8 > r; ++r) I(a, t + 32 * r, a, t - 32, 8) }

    function Pt(a, t) { var r; for (r = 0; 8 > r; ++r) M(a, t, a[t - 1], 8), t += 32 }

    function mt(a, t, r) { var n; for (n = 0; 8 > n; ++n) M(t, r + 32 * n, a, 8) }

    function xt(a, t) {
        var r, n = 8;
        for (r = 0; 8 > r; ++r) n += a[t + r - 32] + a[t - 1 + 32 * r];
        mt(n >> 4, a, t)
    }

    function kt(a, t) {
        var r, n = 4;
        for (r = 0; 8 > r; ++r) n += a[t + r - 32];
        mt(n >> 3, a, t)
    }

    function It(a, t) {
        var r, n = 4;
        for (r = 0; 8 > r; ++r) n += a[t - 1 + 32 * r];
        mt(n >> 3, a, t)
    }

    function At(a, t) { mt(128, a, t) }

    function Vt(a, t, r) {
        var n = a[t - r],
            e = a[t + 0],
            i = 3 * (e - n) + vn[1020 + a[t - 2 * r] - a[t + r]],
            f = wn[112 + (i + 4 >> 3)];
        a[t - r] = gn[255 + n + wn[112 + (i + 3 >> 3)]], a[t + 0] = gn[255 + e - f]
    }

    function Lt(a, t, r, n) {
        var e = a[t + 0],
            i = a[t + r];
        return pn[255 + a[t - 2 * r] - a[t - r]] > n || pn[255 + i - e] > n
    }

    function Rt(a, t, r, n) { return 4 * pn[255 + a[t - r] - a[t + 0]] + pn[255 + a[t - 2 * r] - a[t + r]] <= n }

    function yt(a, t, r, n, e) {
        var i = a[t - 3 * r],
            f = a[t - 2 * r],
            u = a[t - r],
            o = a[t + 0],
            l = a[t + r],
            c = a[t + 2 * r],
            s = a[t + 3 * r];
        return 4 * pn[255 + u - o] + pn[255 + f - l] > n ? 0 : pn[255 + a[t - 4 * r] - i] <= e && pn[255 + i - f] <= e && pn[255 + f - u] <= e && pn[255 + s - c] <= e && pn[255 + c - l] <= e && pn[255 + l - o] <= e
    }

    function Bt(a, t, r, n) { var e = 2 * n + 1; for (n = 0; 16 > n; ++n) Rt(a, t + n, r, e) && Vt(a, t + n, r) }

    function Mt(a, t, r, n) { var e = 2 * n + 1; for (n = 0; 16 > n; ++n) Rt(a, t + n * r, 1, e) && Vt(a, t + n * r, 1) }

    function Gt(a, t, r, n) { var e; for (e = 3; 0 < e; --e) Bt(a, t += 4 * r, r, n) }

    function Et(a, t, r, n) { var e; for (e = 3; 0 < e; --e) Mt(a, t += 4, r, n) }

    function Dt(a, t, r, n, e, i, f, u) {
        for (i = 2 * i + 1; 0 < e--;) {
            if (yt(a, t, r, i, f))
                if (Lt(a, t, r, u)) Vt(a, t, r);
                else {
                    var o = a,
                        l = t,
                        c = r,
                        s = o[l - 2 * c],
                        h = o[l - c],
                        b = o[l + 0],
                        d = o[l + c],
                        v = o[l + 2 * c],
                        w = 27 * (p = vn[1020 + 3 * (b - h) + vn[1020 + s - d]]) + 63 >> 7,
                        g = 18 * p + 63 >> 7,
                        p = 9 * p + 63 >> 7;
                    o[l - 3 * c] = gn[255 + o[l - 3 * c] + p], o[l - 2 * c] = gn[255 + s + g], o[l - c] = gn[255 + h + w], o[l + 0] = gn[255 + b - w], o[l + c] = gn[255 + d - g], o[l + 2 * c] = gn[255 + v - p]
                }
            t += n
        }
    }

    function Ft(a, t, r, n, e, i, f, u) {
        for (i = 2 * i + 1; 0 < e--;) {
            if (yt(a, t, r, i, f))
                if (Lt(a, t, r, u)) Vt(a, t, r);
                else {
                    var o = a,
                        l = t,
                        c = r,
                        s = o[l - c],
                        h = o[l + 0],
                        b = o[l + c],
                        d = wn[112 + ((v = 3 * (h - s)) + 4 >> 3)],
                        v = wn[112 + (v + 3 >> 3)],
                        w = d + 1 >> 1;
                    o[l - 2 * c] = gn[255 + o[l - 2 * c] + w], o[l - c] = gn[255 + s + v], o[l + 0] = gn[255 + h - d], o[l + c] = gn[255 + b - w]
                }
            t += n
        }
    }

    function Ct(a, t, r, n, e, i) { Dt(a, t, r, 1, 16, n, e, i) }

    function Tt(a, t, r, n, e, i) { Dt(a, t, 1, r, 16, n, e, i) }

    function Ut(a, t, r, n, e, i) { var f; for (f = 3; 0 < f; --f) Ft(a, t += 4 * r, r, 1, 16, n, e, i) }

    function jt(a, t, r, n, e, i) { var f; for (f = 3; 0 < f; --f) Ft(a, t += 4, 1, r, 16, n, e, i) }

    function Ht(a, t, r, n, e, i, f, u) { Dt(a, t, e, 1, 8, i, f, u), Dt(r, n, e, 1, 8, i, f, u) }

    function Wt(a, t, r, n, e, i, f, u) { Dt(a, t, 1, e, 8, i, f, u), Dt(r, n, 1, e, 8, i, f, u) }

    function St(a, t, r, n, e, i, f, u) { Ft(a, t + 4 * e, e, 1, 8, i, f, u), Ft(r, n + 4 * e, e, 1, 8, i, f, u) }

    function _t(a, t, r, n, e, i, f, u) { Ft(a, t + 4, 1, e, 8, i, f, u), Ft(r, n + 4, 1, e, 8, i, f, u) }

    function Ot() { this.data = [], this.offset = this.kd = this.ha = this.w = 0, this.na = [], this.xa = this.gb = this.Ja = this.Sa = this.P = 0 }

    function Nt() { this.nc = this.Ea = this.b = this.hc = 0, this.K = [], this.w = 0 }

    function Kt(a, t, r, n, e, i, f) { for (a = null == a ? 0 : a[t + 0], t = 0; t < f; ++t) e[i + t] = a + r[n + t] & 255, a = e[i + t] }

    function Yt(a, t, r, n, e, i, f) {
        var u;
        if (null == a) Kt(null, null, r, n, e, i, f);
        else
            for (u = 0; u < f; ++u) e[i + u] = a[t + u] + r[n + u] & 255
    }

    function zt(a, t, r, n, e, i, f) {
        if (null == a) Kt(null, null, r, n, e, i, f);
        else {
            var u, o = a[t + 0],
                l = o,
                c = o;
            for (u = 0; u < f; ++u) l = c + (o = a[t + u]) - l, c = r[n + u] + (-256 & l ? 0 > l ? 0 : 255 : l) & 255, l = o, e[i + u] = c
        }
    }

    function Jt(a, t, r, n) {
        var e = t.width,
            i = t.o;
        if (x(null != a && null != t), 0 > r || 0 >= n || r + n > i) return null;
        if (!a.Cc) {
            if (null == a.ga) {
                var f;
                if (a.ga = new function() { this.Lc = this.Z = this.$a = this.i = this.c = 0, this.l = new Fa, this.ic = 0, this.ca = [], this.tb = 0, this.qd = null, this.rd = 0 }, (f = null == a.ga) || (f = t.width * t.o, x(0 == a.Gb.length), a.Gb = V(f), a.Uc = 0, null == a.Gb ? f = 0 : (a.mb = a.Gb, a.nb = a.Uc, a.rc = null, f = 1), f = !f), !f) {
                    f = a.ga;
                    var u = a.Fa,
                        o = a.P,
                        c = a.qc,
                        s = a.mb,
                        h = a.nb,
                        b = o + 1,
                        d = c - 1,
                        w = f.l;
                    if (x(null != u && null != s && null != t), Qn[0] = null, Qn[1] = Kt, Qn[2] = Yt, Qn[3] = zt, f.ca = s, f.tb = h, f.c = t.width, f.i = t.height, x(0 < f.c && 0 < f.i), 1 >= c) t = 0;
                    else if (f.$a = u[o + 0] >> 0 & 3, f.Z = u[o + 0] >> 2 & 3, f.Lc = u[o + 0] >> 4 & 3, o = u[o + 0] >> 6 & 3, 0 > f.$a || 1 < f.$a || 4 <= f.Z || 1 < f.Lc || o) t = 0;
                    else if (w.put = ia, w.ac = ea, w.bc = ua, w.ma = f, w.width = t.width, w.height = t.height, w.Da = t.Da, w.v = t.v, w.va = t.va, w.j = t.j, w.o = t.o, f.$a) a: {
                        x(1 == f.$a),
                        t = ka();t: for (;;) {
                            if (null == t) { t = 0; break a }
                            if (x(null != f), f.mc = t, t.c = f.c, t.i = f.i, t.l = f.l, t.l.ma = f, t.l.width = f.c, t.l.height = f.i, t.a = 0, l(t.m, u, b, d), !Ia(f.c, f.i, 1, t, null)) break t;
                            if (1 == t.ab && 3 == t.gc[0].hc && ga(t.s) ? (f.ic = 1, u = t.c * t.i, t.Ta = null, t.Ua = 0, t.V = V(u), t.Ba = 0, null == t.V ? (t.a = 1, t = 0) : t = 1) : (f.ic = 0, t = Aa(t, f.c)), !t) break t;
                            t = 1;
                            break a
                        }
                        f.mc = null,
                        t = 0
                    }
                    else t = d >= f.c * f.i;
                    f = !t
                }
                if (f) return null;
                1 != a.ga.Lc ? a.Ga = 0 : n = i - r
            }
            x(null != a.ga), x(r + n <= i);
            a: {
                if (t = (u = a.ga).c, i = u.l.o, 0 == u.$a) {
                    if (b = a.rc, d = a.Vc, w = a.Fa, o = a.P + 1 + r * t, c = a.mb, s = a.nb + r * t, x(o <= a.P + a.qc), 0 != u.Z)
                        for (x(null != Qn[u.Z]), f = 0; f < n; ++f) Qn[u.Z](b, d, w, o, c, s, t), b = c, d = s, s += t, o += t;
                    else
                        for (f = 0; f < n; ++f) I(c, s, w, o, t), b = c, d = s, s += t, o += t;
                    a.rc = b, a.Vc = d
                } else {
                    if (x(null != u.mc), t = r + n, x(null != (f = u.mc)), x(t <= f.i), f.C >= t) t = 1;
                    else if (u.ic || Qt(), u.ic) {
                        u = f.V, b = f.Ba, d = f.c;
                        var p = f.i,
                            P = (w = 1, o = f.$ / d, c = f.$ % d, s = f.m, h = f.s, f.$),
                            m = d * p,
                            k = d * t,
                            A = h.wc,
                            L = P < k ? ba(h, c, o) : null;
                        x(P <= m), x(t <= p), x(ga(h));
                        t: for (;;) {
                            for (; !s.h && P < k;) {
                                if (c & A || (L = ba(h, c, o)), x(null != L), g(s), 256 > (p = sa(L.G[0], L.H[0], s))) u[b + P] = p, ++P, ++c >= d && (c = 0, ++o <= t && !(o % 16) && Pa(f, o));
                                else {
                                    if (!(280 > p)) { w = 0; break t }
                                    p = la(p - 256, s);
                                    var R, y = sa(L.G[4], L.H[4], s);
                                    if (g(s), !(P >= (y = ca(d, y = la(y, s))) && m - P >= p)) { w = 0; break t }
                                    for (R = 0; R < p; ++R) u[b + P + R] = u[b + P + R - y];
                                    for (P += p, c += p; c >= d;) c -= d, ++o <= t && !(o % 16) && Pa(f, o);
                                    P < k && c & A && (L = ba(h, c, o))
                                }
                                x(s.h == v(s))
                            }
                            Pa(f, o > t ? t : o);
                            break t
                        }!w || s.h && P < m ? (w = 0, f.a = s.h ? 5 : 3) : f.$ = P, t = w
                    } else t = ma(f, f.V, f.Ba, f.c, f.i, t, Va);
                    if (!t) { n = 0; break a }
                }
                r + n >= i && (a.Cc = 1),
                n = 1
            }
            if (!n) return null;
            if (a.Cc && (null != (n = a.ga) && (n.mc = null), a.ga = null, 0 < a.Ga)) return alert("todo:WebPDequantizeLevels"), null
        }
        return a.nb + r * e
    }

    function Xt(a, t, r, n, e, i) {
        for (; 0 < e--;) {
            var f, u = a,
                o = t + (r ? 1 : 0),
                l = a,
                c = t + (r ? 0 : 3);
            for (f = 0; f < n; ++f) {
                var s = l[c + 4 * f];
                255 != s && (s *= 32897, u[o + 4 * f + 0] = u[o + 4 * f + 0] * s >> 23, u[o + 4 * f + 1] = u[o + 4 * f + 1] * s >> 23, u[o + 4 * f + 2] = u[o + 4 * f + 2] * s >> 23)
            }
            t += i
        }
    }

    function Zt(a, t, r, n, e) {
        for (; 0 < n--;) {
            var i;
            for (i = 0; i < r; ++i) {
                var f = a[t + 2 * i + 0],
                    u = 15 & (l = a[t + 2 * i + 1]),
                    o = 4369 * u,
                    l = (240 & l | l >> 4) * o >> 16;
                a[t + 2 * i + 0] = (240 & f | f >> 4) * o >> 16 & 240 | (15 & f | f << 4) * o >> 16 >> 4 & 15, a[t + 2 * i + 1] = 240 & l | u
            }
            t += e
        }
    }

    function $t(a, t, r, n, e, i, f, u) {
        var o, l, c = 255;
        for (l = 0; l < e; ++l) {
            for (o = 0; o < n; ++o) {
                var s = a[t + o];
                i[f + 4 * o] = s, c &= s
            }
            t += r, f += u
        }
        return 255 != c
    }

    function qt(a, t, r, n, e) { var i; for (i = 0; i < e; ++i) r[n + i] = a[t + i] >> 8 }

    function Qt() { fn = Xt, un = Zt, on = $t, ln = qt }

    function ar(a, t, r) {
        self[a] = function(a, n, e, i, f, u, o, l, c, s, h, b, d, v, w, g, p) {
            var P, m = p - 1 >> 1,
                k = f[u + 0] | o[l + 0] << 16,
                I = c[s + 0] | h[b + 0] << 16;
            x(null != a);
            var A = 3 * k + I + 131074 >> 2;
            for (t(a[n + 0], 255 & A, A >> 16, d, v), null != e && (A = 3 * I + k + 131074 >> 2, t(e[i + 0], 255 & A, A >> 16, w, g)), P = 1; P <= m; ++P) {
                var V = f[u + P] | o[l + P] << 16,
                    L = c[s + P] | h[b + P] << 16,
                    R = k + V + I + L + 524296,
                    y = R + 2 * (V + I) >> 3;
                A = y + k >> 1, k = (R = R + 2 * (k + L) >> 3) + V >> 1, t(a[n + 2 * P - 1], 255 & A, A >> 16, d, v + (2 * P - 1) * r), t(a[n + 2 * P - 0], 255 & k, k >> 16, d, v + (2 * P - 0) * r), null != e && (A = R + I >> 1, k = y + L >> 1, t(e[i + 2 * P - 1], 255 & A, A >> 16, w, g + (2 * P - 1) * r), t(e[i + 2 * P + 0], 255 & k, k >> 16, w, g + (2 * P + 0) * r)), k = V, I = L
            }
            1 & p || (A = 3 * k + I + 131074 >> 2, t(a[n + p - 1], 255 & A, A >> 16, d, v + (p - 1) * r), null != e && (A = 3 * I + k + 131074 >> 2, t(e[i + p - 1], 255 & A, A >> 16, w, g + (p - 1) * r)))
        }
    }

    function tr() { ae[Pn] = te, ae[mn] = ne, ae[xn] = re, ae[kn] = ee, ae[In] = ie, ae[An] = fe, ae[Vn] = ue, ae[Ln] = ne, ae[Rn] = ee, ae[yn] = ie, ae[Bn] = fe }

    function rr(a) { return a & ~be ? 0 > a ? 0 : 255 : a >> he }

    function nr(a, t) { return rr((19077 * a >> 8) + (26149 * t >> 8) - 14234) }

    function er(a, t, r) { return rr((19077 * a >> 8) - (6419 * t >> 8) - (13320 * r >> 8) + 8708) }

    function ir(a, t) { return rr((19077 * a >> 8) + (33050 * t >> 8) - 17685) }

    function fr(a, t, r, n, e) { n[e + 0] = nr(a, r), n[e + 1] = er(a, t, r), n[e + 2] = ir(a, t) }

    function ur(a, t, r, n, e) { n[e + 0] = ir(a, t), n[e + 1] = er(a, t, r), n[e + 2] = nr(a, r) }

    function or(a, t, r, n, e) {
        var i = er(a, t, r);
        t = i << 3 & 224 | ir(a, t) >> 3, n[e + 0] = 248 & nr(a, r) | i >> 5, n[e + 1] = t
    }

    function lr(a, t, r, n, e) {
        var i = 240 & ir(a, t) | 15;
        n[e + 0] = 240 & nr(a, r) | er(a, t, r) >> 4, n[e + 1] = i
    }

    function cr(a, t, r, n, e) { n[e + 0] = 255, fr(a, t, r, n, e + 1) }

    function sr(a, t, r, n, e) { ur(a, t, r, n, e), n[e + 3] = 255 }

    function hr(a, t, r, n, e) { fr(a, t, r, n, e), n[e + 3] = 255 }

    function Da(a, t) { return 0 > a ? 0 : a > t ? t : a }

    function br(a, t, r) {
        self[a] = function(a, n, e, i, f, u, o, l, c) {
            for (var s = l + (-2 & c) * r; l != s;) t(a[n + 0], e[i + 0], f[u + 0], o, l), t(a[n + 1], e[i + 0], f[u + 0], o, l + r), n += 2, ++i, ++u, l += 2 * r;
            1 & c && t(a[n + 0], e[i + 0], f[u + 0], o, l)
        }
    }

    function dr(a, t, r) { return 0 == r ? 0 == a ? 0 == t ? 6 : 5 : 0 == t ? 4 : 0 : r }

    function vr(a, t, r, n, e) {
        switch (a >>> 30) {
            case 3:
                _r(t, r, n, e, 0);
                break;
            case 2:
                Or(t, r, n, e);
                break;
            case 1:
                Kr(t, r, n, e)
        }
    }

    function wr(a, t) {
        var r, n, e = t.M,
            i = t.Nb,
            f = a.oc,
            u = a.pc + 40,
            o = a.oc,
            l = a.pc + 584,
            c = a.oc,
            s = a.pc + 600;
        for (r = 0; 16 > r; ++r) f[u + 32 * r - 1] = 129;
        for (r = 0; 8 > r; ++r) o[l + 32 * r - 1] = 129, c[s + 32 * r - 1] = 129;
        for (0 < e ? f[u - 1 - 32] = o[l - 1 - 32] = c[s - 1 - 32] = 129 : (M(f, u - 32 - 1, 127, 21), M(o, l - 32 - 1, 127, 9), M(c, s - 32 - 1, 127, 9)), n = 0; n < a.za; ++n) {
            var h = t.ya[t.aa + n];
            if (0 < n) { for (r = -1; 16 > r; ++r) I(f, u + 32 * r - 4, f, u + 32 * r + 12, 4); for (r = -1; 8 > r; ++r) I(o, l + 32 * r - 4, o, l + 32 * r + 4, 4), I(c, s + 32 * r - 4, c, s + 32 * r + 4, 4) }
            var b = a.Gd,
                d = a.Hd + n,
                v = h.ad,
                w = h.Hc;
            if (0 < e && (I(f, u - 32, b[d].y, 0, 16), I(o, l - 32, b[d].f, 0, 8), I(c, s - 32, b[d].ea, 0, 8)), h.Za) {
                var g = f,
                    p = u - 32 + 16;
                for (0 < e && (n >= a.za - 1 ? M(g, p, b[d].y[15], 4) : I(g, p, b[d + 1].y, 0, 4)), r = 0; 4 > r; r++) g[p + 128 + r] = g[p + 256 + r] = g[p + 384 + r] = g[p + 0 + r];
                for (r = 0; 16 > r; ++r, w <<= 2) g = f, p = u + xe[r], Xn[h.Ob[r]](g, p), vr(w, v, 16 * +r, g, p)
            } else if (g = dr(n, e, h.Ob[0]), Jn[g](f, u), 0 != w)
                for (r = 0; 16 > r; ++r, w <<= 2) vr(w, v, 16 * +r, f, u + xe[r]);
            for (r = h.Gc, g = dr(n, e, h.Dd), Zn[g](o, l), Zn[g](c, s), w = v, g = o, p = l, 255 & (h = r >> 0) && (170 & h ? Nr(w, 256, g, p) : Yr(w, 256, g, p)), h = c, w = s, 255 & (r >>= 8) && (170 & r ? Nr(v, 320, h, w) : Yr(v, 320, h, w)), e < a.Ub - 1 && (I(b[d].y, 0, f, u + 480, 16), I(b[d].f, 0, o, l + 224, 8), I(b[d].ea, 0, c, s + 224, 8)), r = 8 * i * a.B, b = a.sa, d = a.ta + 16 * n + 16 * i * a.R, v = a.qa, h = a.ra + 8 * n + r, w = a.Ha, g = a.Ia + 8 * n + r, r = 0; 16 > r; ++r) I(b, d + r * a.R, f, u + 32 * r, 16);
            for (r = 0; 8 > r; ++r) I(v, h + r * a.B, o, l + 32 * r, 8), I(w, g + r * a.B, c, s + 32 * r, 8)
        }
    }

    function gr(a, t, r, n, e, i, f, u, o) {
        var c = [0],
            s = [0],
            h = 0,
            d = null != o ? o.kd : 0,
            v = null != o ? o : new Ot;
        if (null == a || 12 > r) return 7;
        v.data = a, v.w = t, v.ha = r, t = [t], r = [r], v.gb = [v.gb];
        a: {
            var w = t,
                g = r,
                p = v.gb;
            if (x(null != a), x(null != g), x(null != p), p[0] = 0, 12 <= g[0] && !fa(a, w[0], "RIFF")) {
                if (fa(a, w[0] + 8, "WEBP")) { p = 3; break a }
                var P = R(a, w[0] + 4);
                if (12 > P || 4294967286 < P) { p = 3; break a }
                if (d && P > g[0] - 8) { p = 7; break a }
                p[0] = P, w[0] += 12, g[0] -= 12
            }
            p = 0
        }
        if (0 != p) return p;
        for (P = 0 < v.gb[0], r = r[0];;) {
            a: {
                var m = a;g = t,
                p = r;
                var k = c,
                    I = s,
                    A = w = [0];
                if ((B = h = [h])[0] = 0, 8 > p[0]) p = 7;
                else {
                    if (!fa(m, g[0], "VP8X")) {
                        if (10 != R(m, g[0] + 4)) { p = 3; break a }
                        if (18 > p[0]) { p = 7; break a }
                        var V = R(m, g[0] + 8),
                            y = 1 + L(m, g[0] + 12);
                        if (2147483648 <= y * (m = 1 + L(m, g[0] + 15))) { p = 3; break a }
                        null != A && (A[0] = V), null != k && (k[0] = y), null != I && (I[0] = m), g[0] += 18, p[0] -= 18, B[0] = 1
                    }
                    p = 0
                }
            }
            if (h = h[0], w = w[0], 0 != p) return p;
            if (g = !!(2 & w), !P && h) return 3;
            if (null != i && (i[0] = !!(16 & w)), null != f && (f[0] = g), null != u && (u[0] = 0), f = c[0], w = s[0], h && g && null == o) { p = 0; break }
            if (4 > r) { p = 7; break }
            if (P && h || !P && !h && !fa(a, t[0], "ALPH")) {
                r = [r], v.na = [v.na], v.P = [v.P], v.Sa = [v.Sa];
                a: {
                    V = a,
                    p = t,
                    P = r;
                    var B = v.gb;k = v.na,
                    I = v.P,
                    A = v.Sa;y = 22,
                    x(null != V),
                    x(null != P),
                    m = p[0];
                    var M = P[0];
                    for (x(null != k), x(null != A), k[0] = null, I[0] = null, A[0] = 0;;) {
                        if (p[0] = m, P[0] = M, 8 > M) { p = 7; break a }
                        var G = R(V, m + 4);
                        if (4294967286 < G) { p = 3; break a }
                        var E = 8 + G + 1 & -2;
                        if (y += E, 0 < B && y > B) { p = 3; break a }
                        if (!fa(V, m, "VP8 ") || !fa(V, m, "VP8L")) { p = 0; break a }
                        if (M[0] < E) { p = 7; break a }
                        fa(V, m, "ALPH") || (k[0] = V, I[0] = m + 8, A[0] = G), m += E, M -= E
                    }
                }
                if (r = r[0], v.na = v.na[0], v.P = v.P[0], v.Sa = v.Sa[0], 0 != p) break
            }
            r = [r],
            v.Ja = [v.Ja],
            v.xa = [v.xa];a: if (B = a, p = t, P = r, k = v.gb[0], I = v.Ja, A = v.xa, V = p[0], m = !fa(B, V, "VP8 "), y = !fa(B, V, "VP8L"), x(null != B), x(null != P), x(null != I), x(null != A), 8 > P[0]) p = 7;
                else {
                    if (m || y) {
                        if (B = R(B, V + 4), 12 <= k && B > k - 12) { p = 3; break a }
                        if (d && B > P[0] - 8) { p = 7; break a }
                        I[0] = B, p[0] += 8, P[0] -= 8, A[0] = y
                    } else A[0] = 5 <= P[0] && 47 == B[V + 0] && !(B[V + 4] >> 5), I[0] = P[0];
                    p = 0
                }if (r = r[0], v.Ja = v.Ja[0], v.xa = v.xa[0], t = t[0], 0 != p) break;
            if (4294967286 < v.Ja) return 3;
            if (null == u || g || (u[0] = v.xa ? 2 : 1), f = [f], w = [w], v.xa) {
                if (5 > r) { p = 7; break }
                u = f, d = w, g = i, null == a || 5 > r ? a = 0 : 5 <= r && 47 == a[t + 0] && !(a[t + 4] >> 5) ? (P = [0], B = [0], k = [0], l(I = new b, a, t, r), oa(I, P, B, k) ? (null != u && (u[0] = P[0]), null != d && (d[0] = B[0]), null != g && (g[0] = k[0]), a = 1) : a = 0) : a = 0
            } else {
                if (10 > r) { p = 7; break }
                u = w, null == a || 10 > r || !Ta(a, t + 3, r - 3) ? a = 0 : (d = a[t + 0] | a[t + 1] << 8 | a[t + 2] << 16, g = 16383 & (a[t + 7] << 8 | a[t + 6]), a = 16383 & (a[t + 9] << 8 | a[t + 8]), 1 & d || 3 < (d >> 1 & 7) || !(d >> 4 & 1) || d >> 5 >= v.Ja || !g || !a ? a = 0 : (f && (f[0] = g), u && (u[0] = a), a = 1))
            }
            if (!a) return 3;
            if (f = f[0], w = w[0], h && (c[0] != f || s[0] != w)) return 3;null != o && (o[0] = v, o.offset = t - o.w, x(4294967286 > t - o.w), x(o.offset == o.ha - r));
            break
        }
        return 0 == p || 7 == p && h && null == o ? (null != i && (i[0] |= null != v.na && 0 < v.na.length), null != n && (n[0] = f), null != e && (e[0] = w), 0) : p
    }

    function pr(a, t, r) {
        var n = t.width,
            e = t.height,
            i = 0,
            f = 0,
            u = n,
            o = e;
        if (t.Da = null != a && 0 < a.Da, t.Da && (u = a.cd, o = a.bd, i = a.v, f = a.j, 11 > r || (i &= -2, f &= -2), 0 > i || 0 > f || 0 >= u || 0 >= o || i + u > n || f + o > e)) return 0;
        if (t.v = i, t.j = f, t.va = i + u, t.o = f + o, t.U = u, t.T = o, t.da = null != a && 0 < a.da, t.da) {
            if (!E(u, o, r = [a.ib], i = [a.hb])) return 0;
            t.ib = r[0], t.hb = i[0]
        }
        return t.ob = null != a && a.ob, t.Kb = null == a || !a.Sd, t.da && (t.ob = t.ib < 3 * n / 4 && t.hb < 3 * e / 4, t.Kb = 0), 1
    }

    function Pr(a) {
        if (null == a) return 2;
        if (11 > a.S) {
            var t = a.f.RGBA;
            t.fb += (a.height - 1) * t.A, t.A = -t.A
        } else t = a.f.kb, a = a.height, t.O += (a - 1) * t.fa, t.fa = -t.fa, t.N += (a - 1 >> 1) * t.Ab, t.Ab = -t.Ab, t.W += (a - 1 >> 1) * t.Db, t.Db = -t.Db, null != t.F && (t.J += (a - 1) * t.lb, t.lb = -t.lb);
        return 0
    }

    function mr(a, t, r, n) {
        if (null == n || 0 >= a || 0 >= t) return 2;
        if (null != r) {
            if (r.Da) {
                var e = r.cd,
                    i = r.bd,
                    f = -2 & r.v,
                    u = -2 & r.j;
                if (0 > f || 0 > u || 0 >= e || 0 >= i || f + e > a || u + i > t) return 2;
                a = e, t = i
            }
            if (r.da) {
                if (!E(a, t, e = [r.ib], i = [r.hb])) return 2;
                a = e[0], t = i[0]
            }
        }
        n.width = a, n.height = t;
        a: {
            var o = n.width,
                l = n.height;
            if (a = n.S, 0 >= o || 0 >= l || !(a >= Pn && 13 > a)) a = 2;
            else {
                if (0 >= n.Rd && null == n.sd) {
                    f = i = e = t = 0;
                    var c = (u = o * Ve[a]) * l;
                    if (11 > a || (i = (l + 1) / 2 * (t = (o + 1) / 2), 12 == a && (f = (e = o) * l)), null == (l = V(c + 2 * i + f))) { a = 1; break a }
                    n.sd = l, 11 > a ? ((o = n.f.RGBA).eb = l, o.fb = 0, o.A = u, o.size = c) : ((o = n.f.kb).y = l, o.O = 0, o.fa = u, o.Fd = c, o.f = l, o.N = 0 + c, o.Ab = t, o.Cd = i, o.ea = l, o.W = 0 + c + i, o.Db = t, o.Ed = i, 12 == a && (o.F = l, o.J = 0 + c + 2 * i), o.Tc = f, o.lb = e)
                }
                if (t = 1, e = n.S, i = n.width, f = n.height, e >= Pn && 13 > e)
                    if (11 > e) a = n.f.RGBA, t &= (u = Math.abs(a.A)) * (f - 1) + i <= a.size, t &= u >= i * Ve[e], t &= null != a.eb;
                    else {
                        a = n.f.kb, u = (i + 1) / 2, c = (f + 1) / 2, o = Math.abs(a.fa);
                        l = Math.abs(a.Ab);
                        var s = Math.abs(a.Db),
                            h = Math.abs(a.lb),
                            b = h * (f - 1) + i;
                        t &= o * (f - 1) + i <= a.Fd, t &= l * (c - 1) + u <= a.Cd, t = (t &= s * (c - 1) + u <= a.Ed) & o >= i & l >= u & s >= u, t &= null != a.y, t &= null != a.f, t &= null != a.ea, 12 == e && (t &= h >= i, t &= b <= a.Tc, t &= null != a.F)
                    }
                else t = 0;
                a = t ? 0 : 2
            }
        }
        return 0 != a ? a : (null != r && r.fd && (a = Pr(n)), a)
    }
    var xr = 64,
        kr = [0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383, 32767, 65535, 131071, 262143, 524287, 1048575, 2097151, 4194303, 8388607, 16777215],
        Ir = 24,
        Ar = 32,
        Vr = 8,
        Lr = [0, 0, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7];
    C("Predictor0", "PredictorAdd0"), self.Predictor0 = function() { return 4278190080 }, self.Predictor1 = function(a) { return a }, self.Predictor2 = function(a, t, r) { return t[r + 0] }, self.Predictor3 = function(a, t, r) { return t[r + 1] }, self.Predictor4 = function(a, t, r) { return t[r - 1] }, self.Predictor5 = function(a, t, r) { return U(U(a, t[r + 1]), t[r + 0]) }, self.Predictor6 = function(a, t, r) { return U(a, t[r - 1]) }, self.Predictor7 = function(a, t, r) { return U(a, t[r + 0]) }, self.Predictor8 = function(a, t, r) { return U(t[r - 1], t[r + 0]) }, self.Predictor9 = function(a, t, r) { return U(t[r + 0], t[r + 1]) }, self.Predictor10 = function(a, t, r) { return U(U(a, t[r - 1]), U(t[r + 0], t[r + 1])) }, self.Predictor11 = function(a, t, r) { var n = t[r + 0]; return 0 >= W(n >> 24 & 255, a >> 24 & 255, (t = t[r - 1]) >> 24 & 255) + W(n >> 16 & 255, a >> 16 & 255, t >> 16 & 255) + W(n >> 8 & 255, a >> 8 & 255, t >> 8 & 255) + W(255 & n, 255 & a, 255 & t) ? n : a }, self.Predictor12 = function(a, t, r) { var n = t[r + 0]; return (j((a >> 24 & 255) + (n >> 24 & 255) - ((t = t[r - 1]) >> 24 & 255)) << 24 | j((a >> 16 & 255) + (n >> 16 & 255) - (t >> 16 & 255)) << 16 | j((a >> 8 & 255) + (n >> 8 & 255) - (t >> 8 & 255)) << 8 | j((255 & a) + (255 & n) - (255 & t))) >>> 0 }, self.Predictor13 = function(a, t, r) { var n = t[r - 1]; return (H((a = U(a, t[r + 0])) >> 24 & 255, n >> 24 & 255) << 24 | H(a >> 16 & 255, n >> 16 & 255) << 16 | H(a >> 8 & 255, n >> 8 & 255) << 8 | H(a >> 0 & 255, n >> 0 & 255)) >>> 0 };
    var Rr = self.PredictorAdd0;
    self.PredictorAdd1 = S, C("Predictor2", "PredictorAdd2"), C("Predictor3", "PredictorAdd3"), C("Predictor4", "PredictorAdd4"), C("Predictor5", "PredictorAdd5"), C("Predictor6", "PredictorAdd6"), C("Predictor7", "PredictorAdd7"), C("Predictor8", "PredictorAdd8"), C("Predictor9", "PredictorAdd9"), C("Predictor10", "PredictorAdd10"), C("Predictor11", "PredictorAdd11"), C("Predictor12", "PredictorAdd12"), C("Predictor13", "PredictorAdd13");
    var yr = self.PredictorAdd2;
    K("ColorIndexInverseTransform", "MapARGB", "32b", function(a) { return a >> 8 & 255 }, function(a) { return a }), K("VP8LColorIndexInverseTransformAlpha", "MapAlpha", "8b", function(a) { return a }, function(a) { return a >> 8 & 255 });
    var Br, Mr = self.ColorIndexInverseTransform,
        Gr = self.MapARGB,
        Er = self.VP8LColorIndexInverseTransformAlpha,
        Dr = self.MapAlpha,
        Fr = self.VP8LPredictorsAdd = [];
    Fr.length = 16, (self.VP8LPredictors = []).length = 16, (self.VP8LPredictorsAdd_C = []).length = 16, (self.VP8LPredictors_C = []).length = 16;
    var Cr, Tr, Ur, jr, Hr, Wr, Sr, _r, Or, Nr, Kr, Yr, zr, Jr, Xr, Zr, $r, qr, Qr, an, tn, rn, nn, en, fn, un, on, ln, cn = V(511),
        sn = V(2041),
        hn = V(225),
        bn = V(767),
        dn = 0,
        vn = sn,
        wn = hn,
        gn = bn,
        pn = cn,
        Pn = 0,
        mn = 1,
        xn = 2,
        kn = 3,
        In = 4,
        An = 5,
        Vn = 6,
        Ln = 7,
        Rn = 8,
        yn = 9,
        Bn = 10,
        Mn = [2, 3, 7],
        Gn = [3, 3, 11],
        En = [280, 256, 256, 256, 40],
        Dn = [0, 1, 1, 1, 0],
        Fn = [17, 18, 0, 1, 2, 3, 4, 5, 16, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
        Cn = [24, 7, 23, 25, 40, 6, 39, 41, 22, 26, 38, 42, 56, 5, 55, 57, 21, 27, 54, 58, 37, 43, 72, 4, 71, 73, 20, 28, 53, 59, 70, 74, 36, 44, 88, 69, 75, 52, 60, 3, 87, 89, 19, 29, 86, 90, 35, 45, 68, 76, 85, 91, 51, 61, 104, 2, 103, 105, 18, 30, 102, 106, 34, 46, 84, 92, 67, 77, 101, 107, 50, 62, 120, 1, 119, 121, 83, 93, 17, 31, 100, 108, 66, 78, 118, 122, 33, 47, 117, 123, 49, 63, 99, 109, 82, 94, 0, 116, 124, 65, 79, 16, 32, 98, 110, 48, 115, 125, 81, 95, 64, 114, 126, 97, 111, 80, 113, 127, 96, 112],
        Tn = [2954, 2956, 2958, 2962, 2970, 2986, 3018, 3082, 3212, 3468, 3980, 5004],
        Un = 8,
        jn = [4, 5, 6, 7, 8, 9, 10, 10, 11, 12, 13, 14, 15, 16, 17, 17, 18, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 25, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 91, 93, 95, 96, 98, 100, 101, 102, 104, 106, 108, 110, 112, 114, 116, 118, 122, 124, 126, 128, 130, 132, 134, 136, 138, 140, 143, 145, 148, 151, 154, 157],
        Hn = [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 60, 62, 64, 66, 68, 70, 72, 74, 76, 78, 80, 82, 84, 86, 88, 90, 92, 94, 96, 98, 100, 102, 104, 106, 108, 110, 112, 114, 116, 119, 122, 125, 128, 131, 134, 137, 140, 143, 146, 149, 152, 155, 158, 161, 164, 167, 170, 173, 177, 181, 185, 189, 193, 197, 201, 205, 209, 213, 217, 221, 225, 229, 234, 239, 245, 249, 254, 259, 264, 269, 274, 279, 284],
        Wn = null,
        Sn = [
            [173, 148, 140, 0],
            [176, 155, 140, 135, 0],
            [180, 157, 141, 134, 130, 0],
            [254, 254, 243, 230, 196, 177, 153, 140, 133, 130, 129, 0]
        ],
        _n = [0, 1, 4, 8, 5, 2, 3, 6, 9, 12, 13, 10, 7, 11, 14, 15],
        On = [-0, 1, -1, 2, -2, 3, 4, 6, -3, 5, -4, -5, -6, 7, -7, 8, -8, -9],
        Nn = [
            [
                [
                    [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128],
                    [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128],
                    [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]
                ],
                [
                    [253, 136, 254, 255, 228, 219, 128, 128, 128, 128, 128],
                    [189, 129, 242, 255, 227, 213, 255, 219, 128, 128, 128],
                    [106, 126, 227, 252, 214, 209, 255, 255, 128, 128, 128]
                ],
                [
                    [1, 98, 248, 255, 236, 226, 255, 255, 128, 128, 128],
                    [181, 133, 238, 254, 221, 234, 255, 154, 128, 128, 128],
                    [78, 134, 202, 247, 198, 180, 255, 219, 128, 128, 128]
                ],
                [
                    [1, 185, 249, 255, 243, 255, 128, 128, 128, 128, 128],
                    [184, 150, 247, 255, 236, 224, 128, 128, 128, 128, 128],
                    [77, 110, 216, 255, 236, 230, 128, 128, 128, 128, 128]
                ],
                [
                    [1, 101, 251, 255, 241, 255, 128, 128, 128, 128, 128],
                    [170, 139, 241, 252, 236, 209, 255, 255, 128, 128, 128],
                    [37, 116, 196, 243, 228, 255, 255, 255, 128, 128, 128]
                ],
                [
                    [1, 204, 254, 255, 245, 255, 128, 128, 128, 128, 128],
                    [207, 160, 250, 255, 238, 128, 128, 128, 128, 128, 128],
                    [102, 103, 231, 255, 211, 171, 128, 128, 128, 128, 128]
                ],
                [
                    [1, 152, 252, 255, 240, 255, 128, 128, 128, 128, 128],
                    [177, 135, 243, 255, 234, 225, 128, 128, 128, 128, 128],
                    [80, 129, 211, 255, 194, 224, 128, 128, 128, 128, 128]
                ],
                [
                    [1, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128],
                    [246, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128],
                    [255, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]
                ]
            ],
            [
                [
                    [198, 35, 237, 223, 193, 187, 162, 160, 145, 155, 62],
                    [131, 45, 198, 221, 172, 176, 220, 157, 252, 221, 1],
                    [68, 47, 146, 208, 149, 167, 221, 162, 255, 223, 128]
                ],
                [
                    [1, 149, 241, 255, 221, 224, 255, 255, 128, 128, 128],
                    [184, 141, 234, 253, 222, 220, 255, 199, 128, 128, 128],
                    [81, 99, 181, 242, 176, 190, 249, 202, 255, 255, 128]
                ],
                [
                    [1, 129, 232, 253, 214, 197, 242, 196, 255, 255, 128],
                    [99, 121, 210, 250, 201, 198, 255, 202, 128, 128, 128],
                    [23, 91, 163, 242, 170, 187, 247, 210, 255, 255, 128]
                ],
                [
                    [1, 200, 246, 255, 234, 255, 128, 128, 128, 128, 128],
                    [109, 178, 241, 255, 231, 245, 255, 255, 128, 128, 128],
                    [44, 130, 201, 253, 205, 192, 255, 255, 128, 128, 128]
                ],
                [
                    [1, 132, 239, 251, 219, 209, 255, 165, 128, 128, 128],
                    [94, 136, 225, 251, 218, 190, 255, 255, 128, 128, 128],
                    [22, 100, 174, 245, 186, 161, 255, 199, 128, 128, 128]
                ],
                [
                    [1, 182, 249, 255, 232, 235, 128, 128, 128, 128, 128],
                    [124, 143, 241, 255, 227, 234, 128, 128, 128, 128, 128],
                    [35, 77, 181, 251, 193, 211, 255, 205, 128, 128, 128]
                ],
                [
                    [1, 157, 247, 255, 236, 231, 255, 255, 128, 128, 128],
                    [121, 141, 235, 255, 225, 227, 255, 255, 128, 128, 128],
                    [45, 99, 188, 251, 195, 217, 255, 224, 128, 128, 128]
                ],
                [
                    [1, 1, 251, 255, 213, 255, 128, 128, 128, 128, 128],
                    [203, 1, 248, 255, 255, 128, 128, 128, 128, 128, 128],
                    [137, 1, 177, 255, 224, 255, 128, 128, 128, 128, 128]
                ]
            ],
            [
                [
                    [253, 9, 248, 251, 207, 208, 255, 192, 128, 128, 128],
                    [175, 13, 224, 243, 193, 185, 249, 198, 255, 255, 128],
                    [73, 17, 171, 221, 161, 179, 236, 167, 255, 234, 128]
                ],
                [
                    [1, 95, 247, 253, 212, 183, 255, 255, 128, 128, 128],
                    [239, 90, 244, 250, 211, 209, 255, 255, 128, 128, 128],
                    [155, 77, 195, 248, 188, 195, 255, 255, 128, 128, 128]
                ],
                [
                    [1, 24, 239, 251, 218, 219, 255, 205, 128, 128, 128],
                    [201, 51, 219, 255, 196, 186, 128, 128, 128, 128, 128],
                    [69, 46, 190, 239, 201, 218, 255, 228, 128, 128, 128]
                ],
                [
                    [1, 191, 251, 255, 255, 128, 128, 128, 128, 128, 128],
                    [223, 165, 249, 255, 213, 255, 128, 128, 128, 128, 128],
                    [141, 124, 248, 255, 255, 128, 128, 128, 128, 128, 128]
                ],
                [
                    [1, 16, 248, 255, 255, 128, 128, 128, 128, 128, 128],
                    [190, 36, 230, 255, 236, 255, 128, 128, 128, 128, 128],
                    [149, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128]
                ],
                [
                    [1, 226, 255, 128, 128, 128, 128, 128, 128, 128, 128],
                    [247, 192, 255, 128, 128, 128, 128, 128, 128, 128, 128],
                    [240, 128, 255, 128, 128, 128, 128, 128, 128, 128, 128]
                ],
                [
                    [1, 134, 252, 255, 255, 128, 128, 128, 128, 128, 128],
                    [213, 62, 250, 255, 255, 128, 128, 128, 128, 128, 128],
                    [55, 93, 255, 128, 128, 128, 128, 128, 128, 128, 128]
                ],
                [
                    [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128],
                    [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128],
                    [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]
                ]
            ],
            [
                [
                    [202, 24, 213, 235, 186, 191, 220, 160, 240, 175, 255],
                    [126, 38, 182, 232, 169, 184, 228, 174, 255, 187, 128],
                    [61, 46, 138, 219, 151, 178, 240, 170, 255, 216, 128]
                ],
                [
                    [1, 112, 230, 250, 199, 191, 247, 159, 255, 255, 128],
                    [166, 109, 228, 252, 211, 215, 255, 174, 128, 128, 128],
                    [39, 77, 162, 232, 172, 180, 245, 178, 255, 255, 128]
                ],
                [
                    [1, 52, 220, 246, 198, 199, 249, 220, 255, 255, 128],
                    [124, 74, 191, 243, 183, 193, 250, 221, 255, 255, 128],
                    [24, 71, 130, 219, 154, 170, 243, 182, 255, 255, 128]
                ],
                [
                    [1, 182, 225, 249, 219, 240, 255, 224, 128, 128, 128],
                    [149, 150, 226, 252, 216, 205, 255, 171, 128, 128, 128],
                    [28, 108, 170, 242, 183, 194, 254, 223, 255, 255, 128]
                ],
                [
                    [1, 81, 230, 252, 204, 203, 255, 192, 128, 128, 128],
                    [123, 102, 209, 247, 188, 196, 255, 233, 128, 128, 128],
                    [20, 95, 153, 243, 164, 173, 255, 203, 128, 128, 128]
                ],
                [
                    [1, 222, 248, 255, 216, 213, 128, 128, 128, 128, 128],
                    [168, 175, 246, 252, 235, 205, 255, 255, 128, 128, 128],
                    [47, 116, 215, 255, 211, 212, 255, 255, 128, 128, 128]
                ],
                [
                    [1, 121, 236, 253, 212, 214, 255, 255, 128, 128, 128],
                    [141, 84, 213, 252, 201, 202, 255, 219, 128, 128, 128],
                    [42, 80, 160, 240, 162, 185, 255, 205, 128, 128, 128]
                ],
                [
                    [1, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128],
                    [244, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128],
                    [238, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128]
                ]
            ]
        ],
        Kn = [
            [
                [231, 120, 48, 89, 115, 113, 120, 152, 112],
                [152, 179, 64, 126, 170, 118, 46, 70, 95],
                [175, 69, 143, 80, 85, 82, 72, 155, 103],
                [56, 58, 10, 171, 218, 189, 17, 13, 152],
                [114, 26, 17, 163, 44, 195, 21, 10, 173],
                [121, 24, 80, 195, 26, 62, 44, 64, 85],
                [144, 71, 10, 38, 171, 213, 144, 34, 26],
                [170, 46, 55, 19, 136, 160, 33, 206, 71],
                [63, 20, 8, 114, 114, 208, 12, 9, 226],
                [81, 40, 11, 96, 182, 84, 29, 16, 36]
            ],
            [
                [134, 183, 89, 137, 98, 101, 106, 165, 148],
                [72, 187, 100, 130, 157, 111, 32, 75, 80],
                [66, 102, 167, 99, 74, 62, 40, 234, 128],
                [41, 53, 9, 178, 241, 141, 26, 8, 107],
                [74, 43, 26, 146, 73, 166, 49, 23, 157],
                [65, 38, 105, 160, 51, 52, 31, 115, 128],
                [104, 79, 12, 27, 217, 255, 87, 17, 7],
                [87, 68, 71, 44, 114, 51, 15, 186, 23],
                [47, 41, 14, 110, 182, 183, 21, 17, 194],
                [66, 45, 25, 102, 197, 189, 23, 18, 22]
            ],
            [
                [88, 88, 147, 150, 42, 46, 45, 196, 205],
                [43, 97, 183, 117, 85, 38, 35, 179, 61],
                [39, 53, 200, 87, 26, 21, 43, 232, 171],
                [56, 34, 51, 104, 114, 102, 29, 93, 77],
                [39, 28, 85, 171, 58, 165, 90, 98, 64],
                [34, 22, 116, 206, 23, 34, 43, 166, 73],
                [107, 54, 32, 26, 51, 1, 81, 43, 31],
                [68, 25, 106, 22, 64, 171, 36, 225, 114],
                [34, 19, 21, 102, 132, 188, 16, 76, 124],
                [62, 18, 78, 95, 85, 57, 50, 48, 51]
            ],
            [
                [193, 101, 35, 159, 215, 111, 89, 46, 111],
                [60, 148, 31, 172, 219, 228, 21, 18, 111],
                [112, 113, 77, 85, 179, 255, 38, 120, 114],
                [40, 42, 1, 196, 245, 209, 10, 25, 109],
                [88, 43, 29, 140, 166, 213, 37, 43, 154],
                [61, 63, 30, 155, 67, 45, 68, 1, 209],
                [100, 80, 8, 43, 154, 1, 51, 26, 71],
                [142, 78, 78, 16, 255, 128, 34, 197, 171],
                [41, 40, 5, 102, 211, 183, 4, 1, 221],
                [51, 50, 17, 168, 209, 192, 23, 25, 82]
            ],
            [
                [138, 31, 36, 171, 27, 166, 38, 44, 229],
                [67, 87, 58, 169, 82, 115, 26, 59, 179],
                [63, 59, 90, 180, 59, 166, 93, 73, 154],
                [40, 40, 21, 116, 143, 209, 34, 39, 175],
                [47, 15, 16, 183, 34, 223, 49, 45, 183],
                [46, 17, 33, 183, 6, 98, 15, 32, 183],
                [57, 46, 22, 24, 128, 1, 54, 17, 37],
                [65, 32, 73, 115, 28, 128, 23, 128, 205],
                [40, 3, 9, 115, 51, 192, 18, 6, 223],
                [87, 37, 9, 115, 59, 77, 64, 21, 47]
            ],
            [
                [104, 55, 44, 218, 9, 54, 53, 130, 226],
                [64, 90, 70, 205, 40, 41, 23, 26, 57],
                [54, 57, 112, 184, 5, 41, 38, 166, 213],
                [30, 34, 26, 133, 152, 116, 10, 32, 134],
                [39, 19, 53, 221, 26, 114, 32, 73, 255],
                [31, 9, 65, 234, 2, 15, 1, 118, 73],
                [75, 32, 12, 51, 192, 255, 160, 43, 51],
                [88, 31, 35, 67, 102, 85, 55, 186, 85],
                [56, 21, 23, 111, 59, 205, 45, 37, 192],
                [55, 38, 70, 124, 73, 102, 1, 34, 98]
            ],
            [
                [125, 98, 42, 88, 104, 85, 117, 175, 82],
                [95, 84, 53, 89, 128, 100, 113, 101, 45],
                [75, 79, 123, 47, 51, 128, 81, 171, 1],
                [57, 17, 5, 71, 102, 57, 53, 41, 49],
                [38, 33, 13, 121, 57, 73, 26, 1, 85],
                [41, 10, 67, 138, 77, 110, 90, 47, 114],
                [115, 21, 2, 10, 102, 255, 166, 23, 6],
                [101, 29, 16, 10, 85, 128, 101, 196, 26],
                [57, 18, 10, 102, 102, 213, 34, 20, 43],
                [117, 20, 15, 36, 163, 128, 68, 1, 26]
            ],
            [
                [102, 61, 71, 37, 34, 53, 31, 243, 192],
                [69, 60, 71, 38, 73, 119, 28, 222, 37],
                [68, 45, 128, 34, 1, 47, 11, 245, 171],
                [62, 17, 19, 70, 146, 85, 55, 62, 70],
                [37, 43, 37, 154, 100, 163, 85, 160, 1],
                [63, 9, 92, 136, 28, 64, 32, 201, 85],
                [75, 15, 9, 9, 64, 255, 184, 119, 16],
                [86, 6, 28, 5, 64, 255, 25, 248, 1],
                [56, 8, 17, 132, 137, 255, 55, 116, 128],
                [58, 15, 20, 82, 135, 57, 26, 121, 40]
            ],
            [
                [164, 50, 31, 137, 154, 133, 25, 35, 218],
                [51, 103, 44, 131, 131, 123, 31, 6, 158],
                [86, 40, 64, 135, 148, 224, 45, 183, 128],
                [22, 26, 17, 131, 240, 154, 14, 1, 209],
                [45, 16, 21, 91, 64, 222, 7, 1, 197],
                [56, 21, 39, 155, 60, 138, 23, 102, 213],
                [83, 12, 13, 54, 192, 255, 68, 47, 28],
                [85, 26, 85, 85, 128, 128, 32, 146, 171],
                [18, 11, 7, 63, 144, 171, 4, 4, 246],
                [35, 27, 10, 146, 174, 171, 12, 26, 128]
            ],
            [
                [190, 80, 35, 99, 180, 80, 126, 54, 45],
                [85, 126, 47, 87, 176, 51, 41, 20, 32],
                [101, 75, 128, 139, 118, 146, 116, 128, 85],
                [56, 41, 15, 176, 236, 85, 37, 9, 62],
                [71, 30, 17, 119, 118, 255, 17, 18, 138],
                [101, 38, 60, 138, 55, 70, 43, 26, 142],
                [146, 36, 19, 30, 171, 255, 97, 27, 20],
                [138, 45, 61, 62, 219, 1, 81, 188, 64],
                [32, 41, 20, 117, 151, 142, 20, 21, 163],
                [112, 19, 12, 61, 195, 128, 48, 4, 24]
            ]
        ],
        Yn = [
            [
                [
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [176, 246, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [223, 241, 252, 255, 255, 255, 255, 255, 255, 255, 255],
                    [249, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 244, 252, 255, 255, 255, 255, 255, 255, 255, 255],
                    [234, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [253, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 246, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [239, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [254, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 248, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [251, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [251, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [254, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 254, 253, 255, 254, 255, 255, 255, 255, 255, 255],
                    [250, 255, 254, 255, 254, 255, 255, 255, 255, 255, 255],
                    [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ]
            ],
            [
                [
                    [217, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [225, 252, 241, 253, 255, 255, 254, 255, 255, 255, 255],
                    [234, 250, 241, 250, 253, 255, 253, 254, 255, 255, 255]
                ],
                [
                    [255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [223, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [238, 253, 254, 254, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 248, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [249, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 253, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [247, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [252, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [253, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 254, 253, 255, 255, 255, 255, 255, 255, 255, 255],
                    [250, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ]
            ],
            [
                [
                    [186, 251, 250, 255, 255, 255, 255, 255, 255, 255, 255],
                    [234, 251, 244, 254, 255, 255, 255, 255, 255, 255, 255],
                    [251, 251, 243, 253, 254, 255, 254, 255, 255, 255, 255]
                ],
                [
                    [255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [236, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [251, 253, 253, 254, 254, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [254, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [254, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ]
            ],
            [
                [
                    [248, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [250, 254, 252, 254, 255, 255, 255, 255, 255, 255, 255],
                    [248, 254, 249, 253, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255],
                    [246, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255],
                    [252, 254, 251, 254, 254, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 254, 252, 255, 255, 255, 255, 255, 255, 255, 255],
                    [248, 254, 253, 255, 255, 255, 255, 255, 255, 255, 255],
                    [253, 255, 254, 254, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 251, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [245, 251, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [253, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 251, 253, 255, 255, 255, 255, 255, 255, 255, 255],
                    [252, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 252, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [249, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 255, 253, 255, 255, 255, 255, 255, 255, 255, 255],
                    [250, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ],
                [
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255],
                    [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]
                ]
            ]
        ],
        zn = [0, 1, 2, 3, 6, 4, 5, 6, 6, 6, 6, 6, 6, 6, 6, 7, 0],
        Jn = [],
        Xn = [],
        Zn = [],
        $n = 1,
        qn = 2,
        Qn = [],
        ae = [];
    ar("UpsampleRgbLinePair", fr, 3), ar("UpsampleBgrLinePair", ur, 3), ar("UpsampleRgbaLinePair", hr, 4), ar("UpsampleBgraLinePair", sr, 4), ar("UpsampleArgbLinePair", cr, 4), ar("UpsampleRgba4444LinePair", lr, 2), ar("UpsampleRgb565LinePair", or, 2);
    var te = window.UpsampleRgbLinePair,
        re = window.UpsampleBgrLinePair,
        ne = window.UpsampleRgbaLinePair,
        ee = window.UpsampleBgraLinePair,
        ie = window.UpsampleArgbLinePair,
        fe = window.UpsampleRgba4444LinePair,
        ue = window.UpsampleRgb565LinePair,
        oe = 16,
        le = 1 << oe - 1,
        ce = -227,
        se = 482,
        he = 6,
        be = (256 << he) - 1,
        de = 0,
        ve = V(256),
        we = V(256),
        ge = V(256),
        pe = V(256),
        Pe = V(se - ce),
        me = V(se - ce);
    br("YuvToRgbRow", fr, 3), br("YuvToBgrRow", ur, 3), br("YuvToRgbaRow", hr, 4), br("YuvToBgraRow", sr, 4), br("YuvToArgbRow", cr, 4), br("YuvToRgba4444Row", lr, 2), br("YuvToRgb565Row", or, 2);
    var xe = [0, 4, 8, 12, 128, 132, 136, 140, 256, 260, 264, 268, 384, 388, 392, 396],
        ke = [0, 2, 8],
        Ie = [8, 7, 6, 4, 4, 2, 2, 2, 1, 1, 1, 1],
        Ae = 1;
    this.WebPDecodeRGBA = function(a, t, r, n, e) {
        var i = mn,
            f = new function() { this.ba = new aa, this.ec = [], this.cc = [], this.Mc = [], this.Dc = this.Nc = this.dc = this.fc = 0, this.Oa = new function() { this.Id = this.fd = this.Md = this.hb = this.ib = this.da = this.bd = this.cd = this.j = this.v = this.Da = this.Sd = this.ob = 0 }, this.memory = 0, this.Ib = "OutputFunc", this.Jb = "OutputAlphaFunc", this.Nd = "OutputRowFunc" },
            u = new aa;
        f.ba = u, u.S = i, u.width = [u.width], u.height = [u.height];
        var o = u.width,
            c = u.height,
            s = new function() { this.width = [0], this.height = [0], this.Pd = [0], this.Qd = [0], this.format = [0] };
        if (null == s || null == a) var h = 2;
        else x(null != s), h = gr(a, t, r, s.width, s.height, s.Pd, s.Qd, s.format, null);
        if (0 != h ? o = 0 : (null != o && (o[0] = s.width[0]), null != c && (c[0] = s.height[0]), o = 1), o) {
            u.width = u.width[0], u.height = u.height[0], null != n && (n[0] = u.width), null != e && (e[0] = u.height);
            a: {
                if (n = new Fa, (e = new Ot).data = a, e.w = t, e.ha = r, e.kd = 1, t = [0], x(null != e), (0 == (a = gr(e.data, e.w, e.ha, null, null, null, t, null, e)) || 7 == a) && t[0] && (a = 4), 0 == (t = a)) {
                    if (x(null != f), n.data = e.data, n.w = e.w + e.offset, n.ha = e.ha - e.offset, n.put = ia, n.ac = ea, n.bc = ua, n.ma = f, e.xa) {
                        if (null == (a = ka())) { f = 1; break a }
                        if (function(a, t) {
                                var r = [0],
                                    n = [0],
                                    e = [0];
                                t: for (;;) { if (null == a) return 0; if (null == t) return a.a = 2, 0; if (a.l = t, a.a = 0, l(a.m, t.data, t.w, t.ha), !oa(a.m, r, n, e)) { a.a = 3; break t } if (a.xb = qn, t.width = r[0], t.height = n[0], !Ia(r[0], n[0], 1, a, null)) break t; return 1 }
                                return x(0 != a.a), 0
                            }(a, n)) {
                            if (n = 0 == (t = mr(n.width, n.height, f.Oa, f.ba))) {
                                t: {
                                    n = a;r: for (;;) {
                                        if (null == n) { n = 0; break t }
                                        if (x(null != n.s.yc), x(null != n.s.Ya), x(0 < n.s.Wb), x(null != (r = n.l)), x(null != (e = r.ma)), 0 != n.xb) {
                                            if (n.ca = e.ba, n.tb = e.tb, x(null != n.ca), !pr(e.Oa, r, kn)) { n.a = 2; break r }
                                            if (!Aa(n, r.width)) break r;
                                            if (r.da) break r;
                                            if ((r.da || Q(n.ca.S)) && Qt(), 11 > n.ca.S || (alert("todo:WebPInitConvertARGBToYUV"), null != n.ca.f.kb.F && Qt()), n.Pb && 0 < n.s.ua && null == n.s.vb.X && !y(n.s.vb, n.s.Wa.Xa)) { n.a = 1; break r }
                                            n.xb = 0
                                        }
                                        if (!ma(n, n.V, n.Ba, n.c, n.i, r.o, va)) break r;
                                        e.Dc = n.Ma, n = 1;
                                        break t
                                    }
                                    x(0 != n.a),
                                    n = 0
                                }
                                n = !n
                            }
                            n && (t = a.a)
                        } else t = a.a
                    } else {
                        if (null == (a = new function() { var a = new Ea; return null != a && (a.a = 0, a.sc = "OK", a.cb = 0, a.Xb = 0, Wn || (Wn = ja)), a })) { f = 1; break a }
                        if (a.Fa = e.na, a.P = e.P, a.qc = e.Sa, Ua(a, n)) {
                            if (0 == (t = mr(n.width, n.height, f.Oa, f.ba))) {
                                if (a.Aa = 0, r = f.Oa, x(null != (e = a)), null != r) {
                                    if (0 < (o = 0 > (o = r.Md) ? 0 : 100 < o ? 255 : 255 * o / 100)) {
                                        for (c = s = 0; 4 > c; ++c) 12 > (h = e.pb[c]).lc && (h.ia = o * Ie[0 > h.lc ? 0 : h.lc] >> 3), s |= h.ia;
                                        s && (alert("todo:VP8InitRandom"), e.ia = 1)
                                    }
                                    e.Ga = r.Id, 100 < e.Ga ? e.Ga = 100 : 0 > e.Ga && (e.Ga = 0)
                                }
                                Wa(a, n) || (t = a.a)
                            }
                        } else t = a.a
                    }
                    0 == t && null != f.Oa && f.Oa.fd && (t = Pr(f.ba))
                }
                f = t
            }
            i = 0 != f ? null : 11 > i ? u.f.RGBA.eb : u.f.kb.y
        } else i = null;
        return i
    };
    var Ve = [3, 4, 3, 4, 4, 2, 2, 4, 4, 4, 2, 1, 1]
}, new window.WebPDecoder, window.WebPRiffParser = WebPRiffParser, window.WebPImageViewer = WebPImageViewer;
var inputFile, options = null,
    outputfile = "";

function getInputValueById(a) { return document.getElementById(a).value }

function outputInfo(a) { document.getElementById("outputArea").innerHTML = a }

function _base64ToArrayBuffer(a) { for (var t = window.atob(a), r = t.length, n = new Uint8Array(r), e = 0; e < r; e++) n[e] = t.charCodeAt(e); return n.buffer }

function convertBinaryToArray(a) {
    var t, r = new Array,
        n = a.length;
    for (t = 0; t < n; ++t) r.push(a.charCodeAt(t));
    return r
}

function WebPDecodeAndDraw(a, t) {
    var r = new WebPDecoder;
    response = convertBinaryToArray(a);
    var n = WebPRiffParser(response, 0);
    n.response = response, n.rgbaoutput = !0, n.dataurl = !1, new WebPImageViewer(r, n, function(a) {
        if (!1 !== a) {
            var r = document.createElement("canvas"),
                e = r.getContext("2d"),
                i = n.header ? n.header.canvas_width : a.imgwidth,
                f = n.header ? n.header.canvas_height : a.imgheight;
            r.height = f, r.width = i;
            for (var u = e.createImageData(i, f), o = a.rgbaoutput, l = 0; l < i * f * 4; l++) u.data[l] = o[l];
            e.putImageData(u, 0, 0);
            var c, s = getInputValueById("outformat");
            "jpg" == s ? c = r.toDataURL("image/jpeg") : "png" == s && (c = r.toDataURL("image/png"));
            var h = new Image(100, parseInt(100 * r.height / r.width));
            h.src = c, document.getElementById("outputImages").appendChild(h), c = c.replace(/^data:image\/(png|jpg|jpeg);base64,/, ""), t(c)
        } else t(!1)
    })
}

function convertDo(a, t, r) {
    t = t.toLowerCase();
    var n = getInputValueById("outformat");
    outputfile = t.replace(".webp", "." + n), options = r, WebPDecodeAndDraw(a, function(a) {
        if (a) {
            var t = new Blob([_base64ToArrayBuffer(a)]),
                r = window.URL.createObjectURL(t),
                n = (t.size / 1024).toFixed(2).toString();
            outputInfo("<i class='fa fa-ok fa-2x'></i><br>" + str_converSuccess + "<a download='" + outputfile + "' href='" + r + "'>" + str_clicktoSave + "(" + outputfile + "," + n + "k)</a>")
        } else outputInfo(str_convertFailed)
    })
}

function bReady() {
    window.File && window.FileReader && window.FileList && window.Blob || outputInfo(str_browserNotSupport);
    var a = document.getElementById("filedropzone");
    a.addEventListener("dragover", function(a) { a.stopPropagation(), a.preventDefault(), a.dataTransfer.dropEffect = "copy" }), a.addEventListener("drop", function(a) { a.stopPropagation(), a.preventDefault(), document.getElementById("bfile").value = ""; for (var t, r = a.dataTransfer.files, n = 0; t = r[n]; n++) document.getElementById("curFileInput").innerHTML = "<i class='fa fa-docs'></i>" + t.name, inputFile = t }), document.getElementById("bfile").addEventListener("change", function(a) { for (var t, r = a.target.files, n = 0; t = r[n]; n++) document.getElementById("curFileInput").innerHTML = "<i class='fa fa-docs'></i>" + t.name, inputFile = t }, !1), document.getElementById("convertBtn").addEventListener("click", function(a) {
        if (document.getElementById("outputImages").innerHTML = "", void 0 !== inputFile) {
            outputInfo("<i class='fa fa-spin3 animate-spin'></i>" + str_readingFile);
            var t = new FileReader;
            t.onload = function(a) {
                ! function(a) {
                    outputInfo("<i class='fa fa-spin3 animate-spin'></i>" + str_process);
                    var t = new XMLHttpRequest;
                    t.open("GET", "/convertParam.php?x1=yrstp"), t.onload = function() {
                        if (200 === t.status) {
                            var r = t.responseText.split(",");
                            convertDo(a, inputFile.name, { scale: r[0] })
                        } else console.log("Request failed.  Returned status of " + t.status)
                    }, t.send()
                }(a.target.result)
            }, t.readAsBinaryString(inputFile)
        } else outputInfo(str_pleaseLoadFile)
    })
}
document.addEventListener("DOMContentLoaded", function() { bReady() }, !1);